(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5943:(e,t,a)=>{Promise.resolve().then(a.bind(a,73037))},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},73037:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tb});var r=a(95155),s=a(12115),n=a(99708),i=a(74466),l=a(59434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,...d})});c.displayName="Button";var d=a(90221),u=a(62177),m=a(55594),p=a(15452),f=a(25318);let h=p.bL;p.l9;let x=p.ZL,g=p.bm,v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});v.displayName=p.hJ.displayName;let j=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(x,{children:[(0,r.jsx)(v,{}),(0,r.jsxs)(p.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(p.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=p.UC.displayName;let b=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};b.displayName="DialogHeader";let y=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};y.displayName="DialogFooter";let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});N.displayName=p.hE.displayName;let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});w.displayName=p.VY.displayName;var D=a(40968);let A=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.b,{ref:t,className:(0,l.cn)(A(),a),...s})});k.displayName=D.b.displayName;let T=u.Op,C=s.createContext({}),S=e=>{let{...t}=e;return(0,r.jsx)(C.Provider,{value:{name:t.name},children:(0,r.jsx)(u.xI,{...t})})},I=()=>{let e=s.useContext(C),t=s.useContext(U),{getFieldState:a,formState:r}=(0,u.xW)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},U=s.createContext({}),R=s.forwardRef((e,t)=>{let{className:a,...n}=e,i=s.useId();return(0,r.jsx)(U.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...n})})});R.displayName="FormItem";let E=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:i}=I();return(0,r.jsx)(k,{ref:t,className:(0,l.cn)(n&&"text-destructive",a),htmlFor:i,...s})});E.displayName="FormLabel";let M=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:i,formDescriptionId:l,formMessageId:o}=I();return(0,r.jsx)(n.DX,{ref:t,id:i,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...a})});M.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=I();return(0,r.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let O=s.forwardRef((e,t)=>{var a;let{className:s,children:n,...i}=e,{error:o,formMessageId:c}=I(),d=o?String(null!=(a=null==o?void 0:o.message)?a:""):n;return d?(0,r.jsx)("p",{ref:t,id:c,className:(0,l.cn)("text-sm font-medium text-destructive",s),...i,children:d}):null});O.displayName="FormMessage";let F=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});F.displayName="Input";var z=a(31992),L=a(79556),V=a(77381),_=a(10518);let P=z.bL;z.YJ;let W=z.WT,Y=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(z.l9,{ref:t,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(z.In,{asChild:!0,children:(0,r.jsx)(L.A,{className:"h-4 w-4 opacity-50"})})]})});Y.displayName=z.l9.displayName;let q=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(z.PP,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(V.A,{className:"h-4 w-4"})})});q.displayName=z.PP.displayName;let J=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(z.wn,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(L.A,{className:"h-4 w-4"})})});J.displayName=z.wn.displayName;let G=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,r.jsx)(z.ZL,{children:(0,r.jsxs)(z.UC,{ref:t,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(q,{}),(0,r.jsx)(z.LM,{className:(0,l.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(J,{})]})})});G.displayName=z.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(z.JU,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=z.JU.displayName;let Z=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(z.q7,{ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(z.VF,{children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})}),(0,r.jsx)(z.p4,{children:s})]})});Z.displayName=z.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(z.wv,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=z.wv.displayName;let H=["fsv","rtp","tl","appointment"],K=["GE01","WV01","WV02","WV03","LG01","LG02","LG03","LG04","LG05","LG06"];var B=a(61422),X=a(78843),Q=a(54042),$=a(763);let ee=[{value:"fsv",label:"FSV",icon:B.A,color:"bg-sky-500",preActionDuration:5,postActionDuration:2},{value:"rtp",label:"RTP",icon:X.A,color:"bg-purple-500",preActionDuration:30,postActionDuration:0},{value:"tl",label:"TL",icon:Q.A,color:"bg-orange-500",preActionDuration:0,postActionDuration:90},{value:"appointment",label:"Appointment",icon:$.A,color:"bg-teal-500",preActionDuration:0,postActionDuration:30}];function et(e){return ee.map(t=>{let a=e[t.value];if(a){let{label:e,preActionDuration:r,postActionDuration:s}=a;return{...t,label:null!=e?e:t.label,preActionDuration:null!=r?r:t.preActionDuration,postActionDuration:null!=s?s:t.postActionDuration}}return t})}function ea(e,t){return t.find(t=>t.value===e)}function er(e){return e?new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"})+" UTC":""}function es(e,t){if(!e)return"";let a=new Date(e);return new Date(new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())).getTime()+6e4*t).toISOString()}let en="timeflow-task-type-config";function ei(){let[e,t]=(0,s.useState)(()=>{try{let e=window.localStorage.getItem(en);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading task type config from localStorage:",e),{}}}),[a,r]=(0,s.useState)(()=>et(e));return(0,s.useEffect)(()=>{try{window.localStorage.setItem(en,JSON.stringify(e)),r(et(e))}catch(e){console.error("Error setting task type config in localStorage:",e)}},[e]),(0,s.useEffect)(()=>{try{let e=window.localStorage.getItem(en),a=e?JSON.parse(e):{};t(a)}catch(e){console.error("Error synchronizing task type config from localStorage:",e)}},[]),{effectiveTaskTypeOptions:a,userConfig:e,updateUserConfig:(0,s.useCallback)(e=>{t(e)},[]),resetTaskTypeConfig:(0,s.useCallback)(e=>{t(t=>{if(e){let{[e]:a,...r}=t;return r}return{}})},[])}}var el=a(15222),eo=a(34301);let ec=m.z.object({name:m.z.string().optional(),spacecraft:m.z.enum(K,{required_error:"Spacecraft selection is required."}),startTime:m.z.string().refine(e=>!isNaN(Date.parse(e+"Z"))||!isNaN(Date.parse(e)),{message:"Invalid start time format. Please ensure it's a complete date and time."}),type:m.z.enum(H),preActionDuration:m.z.coerce.number().min(0,"Duration must be non-negative.").default(0),postActionDuration:m.z.coerce.number().min(0,"Duration must be non-negative.").default(0)}),ed=e=>{let t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(n)};function eu(e){var t,a;let{isOpen:n,onOpenChange:i,onSubmit:l,initialTask:o}=e,{effectiveTaskTypeOptions:m}=ei(),p=ed(new Date),f=m.length>0?m[0].value:H[0],x=K[0],v=ea(f,m),w=(0,u.mN)({resolver:(0,d.u)(ec),defaultValues:o?{name:o.name||"",spacecraft:o.spacecraft,startTime:ed(new Date(o.startTime)),type:o.type,preActionDuration:o.preActionDuration,postActionDuration:o.postActionDuration}:{name:"",spacecraft:x,startTime:p,type:f,preActionDuration:null!=(t=null==v?void 0:v.preActionDuration)?t:0,postActionDuration:null!=(a=null==v?void 0:v.postActionDuration)?a:0}}),D=w.watch("type");return(0,s.useEffect)(()=>{if(n){let a=m.length>0?m[0].value:H[0],r=ea(a,m);if(o)w.reset({name:o.name||"",spacecraft:o.spacecraft,startTime:ed(new Date(o.startTime)),type:o.type,preActionDuration:o.preActionDuration,postActionDuration:o.postActionDuration});else{var e,t;w.reset({name:"",spacecraft:x,startTime:ed(new Date),type:a,preActionDuration:null!=(e=null==r?void 0:r.preActionDuration)?e:0,postActionDuration:null!=(t=null==r?void 0:r.postActionDuration)?t:0})}}},[o,w,n,m,x]),(0,s.useEffect)(()=>{if(!w.formState.isDirty&&!o){let e=ea(D,m);e&&(w.setValue("preActionDuration",e.preActionDuration,{shouldValidate:!0}),w.setValue("postActionDuration",e.postActionDuration,{shouldValidate:!0}))}},[D,m,w.setValue,o]),(0,r.jsx)(h,{open:n,onOpenChange:i,children:(0,r.jsxs)(j,{className:"sm:max-w-md bg-card",children:[(0,r.jsx)(b,{children:(0,r.jsx)(N,{className:"font-headline text-2xl",children:o?"Edit Task":"Add New Task"})}),(0,r.jsx)(T,{...w,children:(0,r.jsxs)("form",{onSubmit:w.handleSubmit(e=>{let t=ea(e.type,m),a=e.name;a&&""!==a.trim()||(a="".concat((null==t?void 0:t.label)||e.type," - ").concat(e.spacecraft)),l({id:(null==o?void 0:o.id)||crypto.randomUUID(),name:a,spacecraft:e.spacecraft,startTime:new Date(e.startTime+"Z").toISOString(),type:e.type,preActionDuration:e.preActionDuration,postActionDuration:e.postActionDuration,isCompleted:(null==o?void 0:o.isCompleted)||!1}),i(!1)}),className:"space-y-4 py-4 max-h-[70vh] overflow-y-auto pr-2",children:[(0,r.jsx)(S,{control:w.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Task Name (Optional)"}),(0,r.jsx)(M,{children:(0,r.jsx)(F,{placeholder:"E.g., Morning Standup",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(S,{control:w.control,name:"spacecraft",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Spacecraft"}),(0,r.jsxs)(P,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(M,{children:(0,r.jsx)(Y,{children:(0,r.jsx)(W,{placeholder:"Select a spacecraft"})})}),(0,r.jsx)(G,{children:K.map(e=>(0,r.jsx)(Z,{value:e,children:e},e))})]}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(S,{control:w.control,name:"startTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Core Event Time (UTC)"}),(0,r.jsx)(M,{children:(0,r.jsx)(F,{type:"datetime-local",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(S,{control:w.control,name:"type",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Task Type"}),(0,r.jsxs)(P,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(M,{children:(0,r.jsx)(Y,{children:(0,r.jsx)(W,{placeholder:"Select a task type"})})}),(0,r.jsx)(G,{children:m.map(e=>(0,r.jsx)(Z,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]})},e.value))})]}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(S,{control:w.control,name:"preActionDuration",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Pre-Action Duration (min)"}),(0,r.jsx)(M,{children:(0,r.jsx)(F,{type:"number",min:"0",placeholder:"e.g., 10",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(S,{control:w.control,name:"postActionDuration",render:e=>{let{field:t}=e;return(0,r.jsxs)(R,{children:[(0,r.jsx)(E,{children:"Post-Action Duration (min)"}),(0,r.jsx)(M,{children:(0,r.jsx)(F,{type:"number",min:"0",placeholder:"e.g., 5",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsxs)(y,{className:"pt-4",children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(c,{type:"button",variant:"outline",children:"Cancel"})}),(0,r.jsxs)(c,{type:"submit",children:[o?(0,r.jsx)(el.A,{className:"mr-2 h-4 w-4"}):(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"}),o?"Save Changes":"Add Task"]})]})]})})]})})}let em=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});em.displayName="Card";let ep=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});ep.displayName="CardHeader";let ef=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});ef.displayName="CardTitle";let eh=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});eh.displayName="CardDescription";let ex=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});ex.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var eg=a(76981);let ev=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eg.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(eg.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})})});ev.displayName=eg.bL.displayName;var ej=a(87489);let eb=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,r.jsx)(ej.b,{ref:t,decorative:n,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});eb.displayName=ej.b.displayName;var ey=a(89613);let eN=ey.Kq,ew=ey.bL,eD=ey.l9,eA=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(ey.UC,{ref:t,sideOffset:s,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});eA.displayName=ey.UC.displayName;var ek=a(31949),eT=a(37648),eC=a(77223);function eS(e){let{task:t,onEdit:a,onDelete:s,onToggleComplete:n}=e,{effectiveTaskTypeOptions:i}=ei(),o=function(e){let t=ee.find(t=>t.value===e);return t?t.icon:X.A}(t.type),d=function(e){let t=ee.find(t=>t.value===e);return t?t.color:"bg-gray-500"}(t.type),u=ea(t.type,i),m=t.startTime,p=es(m,-t.preActionDuration),f=es(m,t.postActionDuration),h=new Date(p).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}),x=new Date(f)<new Date&&!t.isCompleted,g=(null==u?void 0:u.label)||t.type,v=t.name||"".concat(g," - ").concat(t.spacecraft);return(0,r.jsxs)(em,{className:(0,l.cn)("mb-4 shadow-lg transition-all hover:shadow-xl",t.isCompleted?"opacity-60":"",x?"border-destructive":""),children:[(0,r.jsx)(ep,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:(0,l.cn)("p-2 rounded-full",d,t.isCompleted?"":"text-primary-foreground"),children:(0,r.jsx)(o,{className:(0,l.cn)("h-5 w-5",t.isCompleted?"text-muted-foreground":"text-primary-foreground")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(ef,{className:(0,l.cn)("text-lg font-headline",t.isCompleted?"line-through text-muted-foreground":""),children:v}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(eh,{className:"text-xs",children:[h," (UTC)"]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center",children:[(0,r.jsx)(X.A,{className:"mr-1 h-3 w-3"})," ",t.spacecraft]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",g,")"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(eN,{children:(0,r.jsxs)(ew,{children:[(0,r.jsx)(eD,{asChild:!0,children:(0,r.jsx)(ev,{id:"complete-".concat(t.id),checked:t.isCompleted,onCheckedChange:()=>n(t.id),"aria-label":"Mark task as complete",className:(0,l.cn)(t.isCompleted?"border-accent data-[state=checked]:bg-accent":"")})}),(0,r.jsx)(eA,{children:(0,r.jsx)("p",{children:t.isCompleted?"Mark as Incomplete":"Mark as Complete"})})]})}),x&&(0,r.jsx)(eN,{children:(0,r.jsxs)(ew,{children:[(0,r.jsx)(eD,{children:(0,r.jsx)(ek.A,{className:"h-5 w-5 text-destructive"})}),(0,r.jsx)(eA,{children:(0,r.jsx)("p",{children:"This task is overdue!"})})]})})]})]})}),(0,r.jsxs)(ex,{className:"p-4 pt-0",children:[(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[t.preActionDuration>0&&(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(eT.A,{className:"mr-2 h-4 w-4 text-primary opacity-70"}),(0,r.jsxs)("span",{children:["Preparation: ",t.preActionDuration," min (",er(p)," - ",er(m),")"]})]}),(t.preActionDuration>0||t.postActionDuration>0)&&(0,r.jsxs)("div",{className:"flex items-center font-medium",children:[(0,r.jsx)(eT.A,{className:"mr-2 h-4 w-4 text-primary"}),(0,r.jsxs)("span",{children:["Core Event Time: ",er(m)]})]}),t.postActionDuration>0&&(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(eT.A,{className:"mr-2 h-4 w-4 text-primary opacity-70"}),(0,r.jsxs)("span",{children:["Follow-up: ",t.postActionDuration," min (",er(m)," - ",er(f),")"]})]}),0===t.preActionDuration&&0===t.postActionDuration&&(0,r.jsxs)("div",{className:"flex items-center font-medium",children:[(0,r.jsx)(eT.A,{className:"mr-2 h-4 w-4 text-primary"}),(0,r.jsxs)("span",{children:["Event at ",er(m)]})]})]}),(0,r.jsx)(eb,{className:"my-3"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>a(t),"aria-label":"Edit task ".concat(v),children:[(0,r.jsx)(el.A,{className:"mr-1 h-4 w-4"})," Edit"]}),(0,r.jsxs)(c,{variant:"destructive",size:"sm",onClick:()=>s(t.id),"aria-label":"Delete task ".concat(v),children:[(0,r.jsx)(eC.A,{className:"mr-1 h-4 w-4"})," Delete"]})]})]})]})}var eI=a(47655);let eU=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(eI.bL,{ref:t,className:(0,l.cn)("relative overflow-hidden",a),...n,children:[(0,r.jsx)(eI.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(eR,{}),(0,r.jsx)(eI.OK,{})]})});eU.displayName=eI.bL.displayName;let eR=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,r.jsx)(eI.VM,{ref:t,orientation:s,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,r.jsx)(eI.lr,{className:"relative flex-1 rounded-full bg-border"})})});eR.displayName=eI.VM.displayName;var eE=a(66766);function eM(e){let{tasks:t,onEditTask:a,onDeleteTask:s,onToggleComplete:n}=e,i=[...t].sort((e,t)=>new Date(e.startTime).getTime()-6e4*e.preActionDuration-(new Date(t.startTime).getTime()-6e4*t.preActionDuration));return 0===i.length?(0,r.jsxs)("div",{className:"mt-8 flex flex-col items-center justify-center text-center p-8 border-2 border-dashed border-border rounded-lg bg-card min-h-[300px]",children:[(0,r.jsx)(eE.default,{src:"https://placehold.co/200x200.png",alt:"No tasks",width:150,height:150,"data-ai-hint":"empty calendar illustration",className:"mb-6 rounded-lg opacity-70"}),(0,r.jsx)("h3",{className:"text-xl font-headline text-foreground mb-2",children:"Your schedule is empty!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Add some tasks to get started with TimeFlow."})]}):(0,r.jsx)(eU,{className:"mt-6 h-[calc(100vh-250px)] rounded-md border p-1 sm:p-4 bg-background shadow-inner",children:(0,r.jsx)("div",{className:"space-y-1 sm:space-y-0",children:i.map(e=>(0,r.jsx)(eS,{task:e,onEdit:a,onDelete:s,onToggleComplete:n},e.id))})})}var eO=a(87481),eF=a(50172),ez=a(18271),eL=a(36936),eV=a(68027),e_=a(68718),eP=a(16923),eW=a(83540),eY=a(39823),eq=a(94754),eJ=a(96025),eG=a(16238),eZ=a(94517),eH=a(24026),eK=a(20594),eB=a(54811),eX=a(70919);let eQ={light:"",dark:".dark"},e$=s.createContext(null);function e0(){let e=s.useContext(e$);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let e1=s.forwardRef((e,t)=>{let{id:a,className:n,children:i,config:o,...c}=e,d=s.useId(),u="chart-".concat(a||d.replace(/:/g,""));return(0,r.jsx)(e$.Provider,{value:{config:o},children:(0,r.jsxs)("div",{"data-chart":u,ref:t,className:(0,l.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...c,children:[(0,r.jsx)(e2,{id:u,config:o}),(0,r.jsx)(eW.u,{children:i})]})})});e1.displayName="Chart";let e2=e=>{let{id:t,config:a}=e,s=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(eQ).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[r,s]=e,n=(null==(t=s.theme)?void 0:t[a])||s.color;return n?"  --color-".concat(r,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};eZ.m,s.forwardRef((e,t)=>{let{active:a,payload:n,className:i,indicator:o="dot",hideLabel:c=!1,hideIndicator:d=!1,label:u,labelFormatter:m,labelClassName:p,formatter:f,color:h,nameKey:x,labelKey:g,content:v,...j}=e,{config:b}=e0(),y=s.useMemo(()=>{if(c||!(null==n?void 0:n.length))return null;if("string"==typeof u){var e;let t=(null==(e=b[u])?void 0:e.label)||u;return(0,r.jsx)("div",{className:(0,l.cn)("font-medium",p),children:t})}if(s.isValidElement(u))return(0,r.jsx)("div",{className:(0,l.cn)("font-medium",p),children:u});let[t]=n,a="".concat(g||t.dataKey||t.name||"value"),i=e5(b,t,a),o=null==i?void 0:i.label;return m&&o?(0,r.jsx)("div",{className:(0,l.cn)("font-medium",p),children:m(o,n)}):o?(0,r.jsx)("div",{className:(0,l.cn)("font-medium",p),children:o}):null},[u,m,n,c,p,b,g]);if(!a||!(null==n?void 0:n.length))return null;if(v)return(0,r.jsxs)("div",{ref:t,className:(0,l.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),...j,children:[y,"function"==typeof v?v({payload:n,config:b}):v]});let N=1===n.length&&"dot"!==o;return(0,r.jsxs)("div",{ref:t,className:(0,l.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),...j,children:[N?null:y,(0,r.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let a="".concat(x||e.name||e.dataKey||"value"),s=e5(b,e,a),n=h||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,l.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.icon)?(0,r.jsx)(s.icon,{}):!d&&(0,r.jsx)("div",{className:(0,l.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":N&&"dashed"===o}),style:{"--color-bg":n,"--color-border":n}}),(0,r.jsxs)("div",{className:(0,l.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[N?y:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),void 0!==e.value&&null!==e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:Array.isArray(e.value)?"".concat(e.value[0].toLocaleString()," - ").concat(e.value[1].toLocaleString()):e.value.toLocaleString()})]})]})},e.dataKey||t)})})]})}).displayName="ChartTooltipContent",eH.s;let e4=s.forwardRef((e,t)=>{let{className:a,hideIcon:s=!1,payload:n,verticalAlign:i="bottom",nameKey:o}=e,{config:c}=e0();if(!(null==n?void 0:n.length)){let e=Object.entries(c);return e.length?(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center justify-center gap-4","top"===i?"pb-3":"pt-3",a),children:e.map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[!s&&(a.icon?(0,r.jsx)(a.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:"var(--color-".concat(t,")")}})),a.label]},t)})}):null}return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center justify-center gap-4","top"===i?"pb-3":"pt-3",a),children:n.map(e=>{var t;let a="".concat(o||e.dataKey||"value"),n=e5(c,e,a);return(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==n?void 0:n.icon)&&!s?(0,r.jsx)(n.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),(null==n?void 0:n.label)||e.value]},null==(t=e.value)?void 0:t.toString())})})});function e5(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return(a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e)?e[s]:t&&"name"in t&&"string"==typeof t.name&&t.name in e?e[t.name]:a in e?e[a]:void 0}e4.displayName="ChartLegend";var e3=a(54073);let e6=s.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,r.jsxs)(e3.bL,{ref:t,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",a),value:s,...n,children:[(0,r.jsx)(e3.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(e3.Q6,{className:"absolute h-full bg-primary"})}),Array.isArray(s)&&2===s.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e3.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),(0,r.jsx)(e3.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}):(0,r.jsx)(e3.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});e6.displayName=e3.bL.displayName;var e8=a(67554);let e9=e=>e.toLowerCase().replace(/\s+/g,""),e7=e=>{let t=Math.floor(e/60)%24;return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},te=e=>{let{active:t,payload:a,effectiveTaskTypeOptions:s}=e;if(t&&a&&a.length){let e=a[0].payload;if(!e)return(0,r.jsx)("div",{style:{backgroundColor:"hsl(var(--destructive))",color:"hsl(var(--destructive-foreground))",padding:"5px",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",zIndex:1e3},children:"Error: Tooltip payload data missing."});if(!e.originalTask)return(0,r.jsxs)("div",{style:{backgroundColor:"hsl(var(--destructive))",color:"hsl(var(--destructive-foreground))",padding:"5px",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",zIndex:1e3},children:["Error: Original task data missing in tooltip. (Task name: ",e.taskNameForAxis||"Unknown",")"]});let t=e.originalTask,n=ea(t.type,s),i=t.name||"".concat((null==n?void 0:n.label)||t.type," - ").concat(t.spacecraft),l=es(t.startTime,-t.preActionDuration);return(0,r.jsxs)("div",{style:{backgroundColor:"hsla(var(--background) / 0.9)",border:"1px solid hsl(var(--border))",padding:"10px",borderRadius:"var(--radius)",boxShadow:"0 4px 6px hsla(var(--foreground) / 0.1)",color:"hsl(var(--foreground))",fontSize:"0.875rem",zIndex:1e3},children:[(0,r.jsxs)("p",{style:{fontWeight:"600",margin:"0 0 8px 0",borderBottom:"1px solid hsl(var(--border))",paddingBottom:"8px"},children:[i," ",(0,r.jsxs)("span",{style:{opacity:.7},children:["(",t.isCompleted?"Completed":"Pending",")"]})]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Overall Start:"})," ",er(l)]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Core Event Time:"})," ",er(t.startTime)]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Spacecraft:"})," ",t.spacecraft]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Preparation:"})," ",t.preActionDuration," min"]}),(0,r.jsxs)("p",{style:{margin:"0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Follow-up:"})," ",t.postActionDuration," min"]})]})}return null},tt=[0,1440];function ta(e){let{tasks:t,selectedDate:a}=e,[n,i]=(0,s.useState)(!1),{effectiveTaskTypeOptions:l}=ei(),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(tt),[p,f]=(0,s.useState)(0);(0,s.useEffect)(()=>{i(!0)},[]);let h=(0,s.useMemo)(()=>l.reduce((e,t)=>{let a=e9(t.value),r="hsl(var(--muted))",s=ee.find(e=>e.value===t.value);if(s)switch(s.value){case"fsv":r="hsl(var(--chart-1))";break;case"rtp":r="hsl(var(--chart-2))";break;case"tl":r="hsl(var(--chart-3))";break;case"appointment":r="hsl(var(--chart-4))"}return e[a]={label:t.label,color:r,icon:t.icon||(null==s?void 0:s.icon)},e},{}),[l]),x=(0,s.useMemo)(()=>{let e=u[0],r=u[1],s=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),n=s+6e4*e,i=s+6e4*r,o=t.filter(e=>{let t=new Date(e.startTime).getTime(),a=t-6e4*e.preActionDuration,r=Math.max(6e4,t+6e4*e.postActionDuration-a);return a<i&&a+r>n});return o.sort((e,t)=>new Date(e.startTime).getTime()-6e4*e.preActionDuration-(new Date(t.startTime).getTime()-6e4*t.preActionDuration)),o.map(e=>{let t=new Date(e.startTime).getTime(),a=t-6e4*e.preActionDuration,r=t+6e4*e.postActionDuration,n=(a-s)/6e4,i=(r-s)/6e4;i<=n&&(i=n+1);let o=ea(e.type,l),c=e.name||"".concat((null==o?void 0:o.label)||e.type," - ").concat(e.spacecraft),d="".concat(c.substring(0,25)).concat(c.length>25?"...":""," (").concat(e.spacecraft,")");return{id:e.id,taskNameForAxis:d,timeRange:[n,i],fillColorKey:e.type,originalTask:e,tooltipLabel:c,isCompleted:e.isCompleted||!1}}).filter(Boolean)},[t,a,u,l]);(0,s.useEffect)(()=>{if(!n)return;let e=new Date,t=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),r=(e.getTime()-t)/6e4;r>=u[0]&&r<=u[1]?d(r):d(null)},[a,u,t,p,n]);let g=x.length>0?6*Math.max(...x.map(e=>e.taskNameForAxis.length))+40:80;return n?(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(ef,{children:"Daily Schedule Graph"}),(0,r.jsxs)(eh,{children:["Schedule for: ",a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}),". Times are displayed in UTC. Use slider to adjust view."]})]}),(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>{f(e=>e+1)},"aria-label":"Refresh 'Now' line",children:[(0,r.jsx)(e8.A,{className:"h-4 w-4 mr-2"}),"Refresh 'Now'"]})]}),(0,r.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,r.jsxs)(k,{htmlFor:"time-range-slider",className:"text-sm font-medium",children:["Visible Time Range (UTC): ",e7(u[0])," - ",e7(u[1])]}),(0,r.jsx)(e6,{id:"time-range-slider",min:0,max:2880,step:15,value:u,onValueChange:e=>{let[t,a]=e;a-t<30&&(a!==u[1]?t=Math.max(0,a-30):a=Math.min(2880,t+30)),m([Math.round(t),Math.round(a)])},className:"w-full","aria-label":"Time range slider"})]})]}),(0,r.jsx)(ex,{className:"min-h-[250px] flex flex-col justify-center",children:0===x.length&&null===o&&n?(0,r.jsxs)("p",{className:"text-muted-foreground text-center py-8",children:["No tasks scheduled for this period on ",a.toLocaleDateString("en-CA",{timeZone:"UTC"}),"."]}):(0,r.jsx)(e1,{config:h,className:"min-h-[200px] h-[calc(40px*var(--visible-tasks,10)+100px)] max-h-[800px] w-full",style:{"--visible-tasks":Math.max(1,x.length)},children:(0,r.jsx)(eW.u,{width:"100%",height:"100%",children:(0,r.jsxs)(eY.E,{layout:"vertical",data:x,margin:{top:5,right:30,left:Math.min(250,g),bottom:20},barCategoryGap:"20%",children:[(0,r.jsx)(eq.d,{strokeDasharray:"3 3",horizontal:!0,vertical:!0}),(0,r.jsx)(eJ.W,{type:"number",dataKey:"timeRange[0]",domain:u,tickFormatter:e=>{let t=Math.floor(e/60)%24;return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},label:{value:"Time (UTC)",position:"insideBottom",offset:-10,dy:10},allowDecimals:!1,scale:"time",interval:"preserveStartEnd",minTickGap:30}),(0,r.jsx)(eG.h,{type:"category",dataKey:"id",tickFormatter:e=>{var t;return(null==(t=x.find(t=>t.id===e))?void 0:t.taskNameForAxis)||""},width:g,interval:0,domain:x.length>0?void 0:["No Tasks"],ticks:x.length>0?x.map(e=>e.id):[]}),(0,r.jsx)(eZ.m,{cursor:{fill:"hsla(var(--muted), 0.5)"},content:e=>(0,r.jsx)(te,{...e,effectiveTaskTypeOptions:l}),wrapperStyle:{zIndex:1100}}),(0,r.jsx)(eH.s,{content:(0,r.jsx)(e4,{})}),x.length>0&&(0,r.jsx)(eK.y,{dataKey:"timeRange",barSize:20,radius:[4,4,4,4],children:x.map(e=>{var t;let a=(null==(t=h[e9(e.fillColorKey)])?void 0:t.color)||"hsl(var(--muted))";if(e.isCompleted){if(a.startsWith("hsl(var(--")){let e=a.substring(4,a.length-1);a="hsla(".concat(e,", 0.5)")}else if(a.startsWith("hsl(")){let e=a.substring(4,a.length-1);a="hsla(".concat(e,", 0.5)")}}return(0,r.jsx)(eB.f,{fill:a},"cell-".concat(e.id))})}),null!==o&&(0,r.jsx)(eX.e,{x:o,stroke:"hsl(var(--destructive))",strokeWidth:2,strokeDasharray:"8 4",ifOverflow:"hidden",label:{value:"Now",position:"insideTopRight",fill:"hsl(var(--destructive))",fontSize:12,fontWeight:"bold",dy:-10,dx:10}})]})})})})]}):(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsx)(ef,{children:"Daily Schedule Graph"}),(0,r.jsxs)(eh,{children:["Schedule for: ",a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}),". Times are displayed in UTC. Use slider to adjust view."]}),(0,r.jsx)("div",{className:"pt-4 space-y-2",children:(0,r.jsx)("div",{className:"h-6 w-full bg-muted rounded animate-pulse"})})]}),(0,r.jsx)(ex,{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Loading chart..."})]})}var tr=a(8531),ts=a(59119);function tn(e){let{isOpen:t,onOpenChange:a}=e,{userConfig:n,updateUserConfig:i,resetTaskTypeConfig:l}=ei(),[o,d]=(0,s.useState)({}),{toast:u}=(0,eO.dj)();(0,s.useEffect)(()=>{if(t){let e=JSON.parse(JSON.stringify(n)),t={};ee.forEach(a=>{var r,s,n,i,l,o;t[a.value]={label:null!=(i=null==(r=e[a.value])?void 0:r.label)?i:a.label,preActionDuration:null!=(l=null==(s=e[a.value])?void 0:s.preActionDuration)?l:a.preActionDuration,postActionDuration:null!=(o=null==(n=e[a.value])?void 0:n.postActionDuration)?o:a.postActionDuration}}),d(t)}},[t,n]);let m=(e,t,a)=>{d(r=>{let s=r[e]||{},n={...s,label:s.label,preActionDuration:s.preActionDuration,postActionDuration:s.postActionDuration};return"preActionDuration"===t||"postActionDuration"===t?n[t]=Math.max(0,Number(a)):"label"===t&&(n[t]=String(a)),{...r,[e]:n}})},p=e=>{var t;l(e);let a=ee.find(t=>t.value===e);a&&d(t=>({...t,[e]:{label:a.label,preActionDuration:a.preActionDuration,postActionDuration:a.postActionDuration}})),u({title:"Task Type Configuration Reset",description:'Settings for "'.concat(null==(t=ee.find(t=>t.value===e))?void 0:t.label,'" have been reset to default. Save to persist.')})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h,{open:t,onOpenChange:a,children:(0,r.jsxs)(j,{className:"sm:max-w-lg md:max-w-2xl bg-card",children:[(0,r.jsxs)(b,{children:[(0,r.jsx)(N,{className:"font-headline text-2xl",children:"Task Type Settings"}),(0,r.jsx)(w,{children:"Customize labels and pre/post action durations for task types."})]}),(0,r.jsx)(eU,{className:"max-h-[70vh] p-1 pr-4",children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Task Type Configuration"}),(0,r.jsx)("div",{className:"space-y-6",children:ee.map(e=>{let t=o[e.value]||{label:e.label,preActionDuration:e.preActionDuration,postActionDuration:e.postActionDuration},a=t.label,s=t.preActionDuration,n=t.postActionDuration;return(0,r.jsxs)("div",{className:"p-4 border rounded-md shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-primary flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-5 w-5"}),e.label," Default Values"]}),(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>p(e.value),children:[(0,r.jsx)(tr.A,{className:"mr-2 h-4 w-4"})," Reset"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(k,{htmlFor:"label-".concat(e.value),children:"Display Name"}),(0,r.jsx)(F,{id:"label-".concat(e.value),value:a,onChange:t=>m(e.value,"label",t.target.value),placeholder:e.label})]}),(0,r.jsxs)("div",{className:"space-y-1 md:col-start-1",children:[" ",(0,r.jsx)(k,{htmlFor:"preActionDuration-".concat(e.value),children:"Pre-Action Duration (min)"}),(0,r.jsx)(F,{id:"preActionDuration-".concat(e.value),type:"number",value:s,min:"0",onChange:t=>m(e.value,"preActionDuration",parseInt(t.target.value,10)),placeholder:String(e.preActionDuration)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(k,{htmlFor:"postActionDuration-".concat(e.value),children:"Post-Action Duration (min)"}),(0,r.jsx)(F,{id:"postActionDuration-".concat(e.value),type:"number",value:n,min:"0",onChange:t=>m(e.value,"postActionDuration",parseInt(t.target.value,10)),placeholder:String(e.postActionDuration)})]})]})]},e.value)})}),(0,r.jsxs)(c,{onClick:()=>{let e={};for(let t in o){let a=t,r=o[a],s=ee.find(e=>e.value===a);s&&r&&(r.label!==s.label||r.preActionDuration!==s.preActionDuration||r.postActionDuration!==s.postActionDuration)&&(e[a]=r)}i(e),u({title:"Task Type Settings Saved",description:"Task type configurations have been updated."})},className:"mt-4",children:[(0,r.jsx)(ts.A,{className:"mr-2 h-4 w-4"})," Save Task Type Changes"]})]})}),(0,r.jsx)(y,{className:"pt-4 mt-4",children:(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(c,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Close"})})})]})})})}let ti=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...s})})});ti.displayName="Table";let tl=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});tl.displayName="TableHeader";let to=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});to.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let tc=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});tc.displayName="TableRow";let td=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});td.displayName="TableHead";let tu=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});tu.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var tm=a(15599),tp=a(80393);let tf=e=>{let t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(n)};function th(e){let{onBatchAddTasks:t}=e,[a,n]=(0,s.useState)([]),{effectiveTaskTypeOptions:i}=ei(),{toast:l}=(0,eO.dj)(),o=i.length>0?i[0]:ee[0],d=K[0],u=e=>{n(a.filter(t=>t.tempId!==e))},m=e=>{let t=a.findIndex(t=>t.tempId===e);if(-1===t)return;let r=a[t],s={...r,tempId:crypto.randomUUID()};n([...a.slice(0,t+1),s,...a.slice(t+1)]),l({title:"Row Duplicated",description:'A copy of the task "'.concat(r.name||"Untitled Task",'" has been added below.')})},p=(e,t,r)=>{n(a.map(a=>{if(a.tempId===e){let e={...a,[t]:r};if("type"===t){var s,n;let t=ea(r,i);e.preActionDuration=null!=(s=null==t?void 0:t.preActionDuration)?s:0,e.postActionDuration=null!=(n=null==t?void 0:t.postActionDuration)?n:0}return e}return a}))};return(0,r.jsxs)("div",{className:"my-8 p-4 border rounded-lg shadow-sm bg-card",children:[(0,r.jsx)("h3",{className:"text-xl font-headline font-semibold text-foreground mb-4",children:"Batch Add Tasks (via Table)"}),0===a.length&&(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:'Click "Add Row" to start entering tasks in the table below. Pre/Post durations default from task type.'}),a.length>0&&(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(ti,{className:"mb-4 min-w-[800px]",children:[(0,r.jsx)(tl,{children:(0,r.jsxs)(tc,{children:[(0,r.jsx)(td,{className:"w-[20%]",children:"Task Name (Optional)"}),(0,r.jsx)(td,{className:"w-[15%]",children:"Spacecraft"}),(0,r.jsx)(td,{className:"w-[20%]",children:"Core Event Time (UTC)"}),(0,r.jsx)(td,{className:"w-[15%]",children:"Type"}),(0,r.jsx)(td,{className:"w-[10%]",children:"Pre (min)"}),(0,r.jsx)(td,{className:"w-[10%]",children:"Post (min)"}),(0,r.jsx)(td,{className:"w-[10%] text-right",children:"Actions"})]})}),(0,r.jsx)(to,{children:a.map(e=>{var t,a;return(0,r.jsxs)(tc,{children:[(0,r.jsx)(tu,{children:(0,r.jsx)(F,{value:e.name||"",onChange:t=>p(e.tempId,"name",t.target.value),placeholder:"E.g., Team Meeting",className:"h-9 text-xs"})}),(0,r.jsx)(tu,{children:(0,r.jsxs)(P,{value:e.spacecraft,onValueChange:t=>p(e.tempId,"spacecraft",t),children:[(0,r.jsx)(Y,{className:"h-9 text-xs",children:(0,r.jsx)(W,{placeholder:"Select spacecraft"})}),(0,r.jsx)(G,{children:K.map(e=>(0,r.jsx)(Z,{value:e,children:e},e))})]})}),(0,r.jsx)(tu,{children:(0,r.jsx)(F,{type:"datetime-local",value:e.startTime,onChange:t=>p(e.tempId,"startTime",t.target.value),className:"h-9 text-xs"})}),(0,r.jsx)(tu,{children:(0,r.jsxs)(P,{value:e.type,onValueChange:t=>p(e.tempId,"type",t),children:[(0,r.jsx)(Y,{className:"h-9 text-xs",children:(0,r.jsx)(W,{placeholder:"Select type"})}),(0,r.jsx)(G,{children:i.map(e=>(0,r.jsx)(Z,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-3 w-3"}),e.label]})},e.value))})]})}),(0,r.jsx)(tu,{children:(0,r.jsx)(F,{type:"number",min:"0",value:null!=(t=e.preActionDuration)?t:"",onChange:t=>p(e.tempId,"preActionDuration",parseInt(t.target.value,10)||0),placeholder:"Def",className:"h-9 text-xs"})}),(0,r.jsx)(tu,{children:(0,r.jsx)(F,{type:"number",min:"0",value:null!=(a=e.postActionDuration)?a:"",onChange:t=>p(e.tempId,"postActionDuration",parseInt(t.target.value,10)||0),placeholder:"Def",className:"h-9 text-xs"})}),(0,r.jsxs)(tu,{className:"text-right space-x-1",children:[(0,r.jsx)(c,{variant:"ghost",size:"icon",onClick:()=>m(e.tempId),"aria-label":"Duplicate row",title:"Duplicate row",className:"h-7 w-7",children:(0,r.jsx)(tm.A,{className:"h-3.5 w-3.5 text-blue-500"})}),(0,r.jsx)(c,{variant:"ghost",size:"icon",onClick:()=>u(e.tempId),"aria-label":"Remove row",title:"Remove row",className:"h-7 w-7",children:(0,r.jsx)(eC.A,{className:"h-3.5 w-3.5 text-destructive"})})]})]},e.tempId)})})]})}),(0,r.jsxs)("div",{className:"flex justify-start space-x-2",children:[(0,r.jsxs)(c,{onClick:()=>{var e,t;let r=ea(o.value,i);n([...a,{tempId:crypto.randomUUID(),name:"",spacecraft:d,startTime:tf(new Date),type:o.value,preActionDuration:null!=(e=null==r?void 0:r.preActionDuration)?e:0,postActionDuration:null!=(t=null==r?void 0:r.postActionDuration)?t:0}])},variant:"outline",children:[(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"})," Add Row"]}),a.length>0&&(0,r.jsxs)(c,{onClick:()=>{let e=[],r=!0;if(0===a.length)return void l({title:"No Tasks to Add",description:"Please add some rows to the table first.",variant:"destructive"});for(let t of a){let a=ea(t.type,i);if(!a){l({title:"Error",description:'Could not find details for task type "'.concat(t.type,'".'),variant:"destructive"}),r=!1;break}let s=t.name;if(s&&""!==s.trim()||(s="".concat(a.label," - ").concat(t.spacecraft)),isNaN(Date.parse(t.startTime+"Z"))){l({title:"Validation Error",description:'Invalid start time for task "'.concat(s,"\". Ensure it's full date and time."),variant:"destructive"}),r=!1;break}let n=void 0===t.preActionDuration||isNaN(Number(t.preActionDuration))?a.preActionDuration:Number(t.preActionDuration),o=void 0===t.postActionDuration||isNaN(Number(t.postActionDuration))?a.postActionDuration:Number(t.postActionDuration);e.push({name:s,spacecraft:t.spacecraft,startTime:new Date(t.startTime+"Z").toISOString(),type:t.type,preActionDuration:Math.max(0,n),postActionDuration:Math.max(0,o)})}r&&e.length>0?(t(e),n([])):r&&0===e.length&&a.length>0&&l({title:"No Valid Tasks",description:"No valid tasks were found to add. Please check your inputs.",variant:"destructive"})},children:[(0,r.jsx)(tp.A,{className:"mr-2 h-4 w-4"})," Add All Tasks to Schedule"]})]})]})}var tx=a(57701),tg=a(70154);let tv=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tx.bL,{className:(0,l.cn)("grid gap-2",a),...s,ref:t})});tv.displayName=tx.bL.displayName;let tj=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tx.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)(tx.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(tg.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});function tb(){let[e,t]=function(){var e="timeflow-tasks",t=[];let[a,r]=(0,s.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.error("Error reading localStorage key “"+e+"”:",a),t}});return(0,s.useEffect)(()=>{try{let t=a instanceof Function?a(a):a;window.localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error("Error setting localStorage key “"+e+"”:",t)}},[e,a]),(0,s.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&r(JSON.parse(t))}catch(t){console.error("Error synchronizing localStorage key “"+e+"”:",t)}},[e]),[a,r]}(),[a,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),{toast:h}=(0,eO.dj)(),[x,g]=(0,s.useState)(new Date),{effectiveTaskTypeOptions:v}=ei(),[j,b]=(0,s.useState)(null),[y,N]=(0,s.useState)("replace");(0,s.useEffect)(()=>{m(!0)},[]),(0,s.useEffect)(()=>{if(u){let e=new Date;g(new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())))}},[u]),(0,s.useEffect)(()=>{if(u){let e=localStorage.getItem("timeflow-theme"),t=!1;e?t="dark"===e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(t=!0),f(t),document.documentElement.classList.toggle("dark",t)}},[u]);let w=e=>{if(null==e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?'"'.concat(t.replace(/"/g,'""'),'"'):t};return u?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col p-4 md:p-8 bg-background transition-colors duration-300",children:[(0,r.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 pb-4 border-b-2 border-border",children:[(0,r.jsx)("h1",{className:"text-4xl font-headline font-bold text-primary mb-4 sm:mb-0",children:"TimeFlow"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)(c,{variant:"outline",size:"icon",onClick:()=>l(!0),"aria-label":"Configure Task Types",children:(0,r.jsx)(ez.A,{className:"h-[1.2rem] w-[1.2rem]"})}),(0,r.jsx)(c,{variant:"outline",size:"icon",onClick:()=>{let e=!p;f(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("timeflow-theme",e?"dark":"light"),h({title:"Switched to ".concat(e?"Dark":"Light"," Mode"),variant:"default"})},"aria-label":"Toggle dark mode",children:p?(0,r.jsx)(eL.A,{className:"h-[1.2rem] w-[1.2rem]"}):(0,r.jsx)(eV.A,{className:"h-[1.2rem] w-[1.2rem]"})}),(0,r.jsxs)(c,{onClick:()=>{if(0===e.length)return void h({title:"No Tasks",description:"There are no tasks to export.",variant:"default"});let t=["id,name,spacecraft,startTime,type,preActionDuration,postActionDuration,isCompleted"];e.forEach(e=>{let a=[w(e.id),w(e.name),w(e.spacecraft),w(e.startTime),w(e.type),w(e.preActionDuration),w(e.postActionDuration),w(e.isCompleted)];t.push(a.join(","))});let a=new Blob([t.join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(a),t=new Date().toISOString().slice(0,10);r.setAttribute("href",e),r.setAttribute("download","timeflow_tasks_".concat(t,".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),h({title:"Export Successful",description:"Tasks exported to CSV.",className:"bg-accent text-accent-foreground border-accent"})}else h({title:"Export Failed",description:"Your browser does not support this feature.",variant:"destructive"})},variant:"outline",children:[(0,r.jsx)(e_.A,{className:"mr-2 h-4 w-4"})," Export Tasks (CSV)"]}),(0,r.jsxs)(c,{onClick:()=>{d(null),n(!0)},className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"})," Add Task (Modal)"]})]})]}),(0,r.jsxs)("main",{className:"flex-grow space-y-8",children:[(0,r.jsx)("section",{children:(0,r.jsx)(ta,{tasks:e,selectedDate:x})}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-2xl font-headline font-semibold text-foreground mb-4",children:"Task List"}),(0,r.jsx)(eM,{tasks:e,onEditTask:e=>{d(e),n(!0)},onDeleteTask:a=>{let r=e.find(e=>e.id===a);t(e=>e.filter(e=>e.id!==a)),r&&h({title:"Task Deleted",description:'"'.concat(r.name,'" has been removed.'),variant:"destructive"})},onToggleComplete:e=>{let a="",r=!1;t(t=>t.map(t=>t.id===e?(a=t.name||"Task",r=!t.isCompleted,{...t,isCompleted:!t.isCompleted}):t)),a&&h({title:r?"Task Completed!":"Task Marked Incomplete",description:'"'.concat(a,'" status updated.'),variant:"default",className:r?"bg-accent text-accent-foreground border-accent":""})}})]}),(0,r.jsx)(th,{onBatchAddTasks:e=>{let a=e.map(e=>({...e,id:crypto.randomUUID(),isCompleted:!1}));t(e=>[...e,...a]),h({title:"Tasks Added",description:"".concat(a.length," task(s) have been added to your schedule."),variant:"default",className:"bg-accent text-accent-foreground border-accent"})}}),(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsx)(ef,{children:"Import Tasks from CSV"}),(0,r.jsxs)(eh,{children:["Upload a CSV file to import tasks. Header row required. Columns: ",(0,r.jsx)("strong",{children:"id"})," (ignored), ",(0,r.jsx)("strong",{children:"name"})," (optional), ",(0,r.jsx)("strong",{children:"spacecraft"})," (required),",(0,r.jsx)("strong",{children:"startTime"})," (required, ISO 8601 UTC format e.g., ",(0,r.jsx)("code",{children:"YYYY-MM-DDTHH:mm:ss.sssZ"}),"),",(0,r.jsx)("strong",{children:"type"})," (required), ",(0,r.jsx)("strong",{children:"preActionDuration"})," (optional, minutes),",(0,r.jsx)("strong",{children:"postActionDuration"})," (optional, minutes), ",(0,r.jsx)("strong",{children:"isCompleted"})," (optional, true/false).",(0,r.jsx)("br",{}),"Valid task type values are: ",v.map(e=>'"'.concat(e.value,'"')).join(", "),".",(0,r.jsx)("br",{}),"If pre/post durations are not provided, they default from the task type's settings."]})]}),(0,r.jsxs)(ex,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{htmlFor:"csvImporter",children:"CSV File"}),(0,r.jsx)(F,{id:"csvImporter",type:"file",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]?b(e.target.files[0]):b(null)},className:"mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{children:"Import Mode"}),(0,r.jsxs)(tv,{defaultValue:"replace",onValueChange:e=>N(e),className:"mt-1 flex space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(tj,{value:"replace",id:"replaceMode"}),(0,r.jsx)(k,{htmlFor:"replaceMode",children:"Replace existing tasks"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(tj,{value:"add",id:"addMode"}),(0,r.jsx)(k,{htmlFor:"addMode",children:"Add to existing tasks"})]})]})]}),(0,r.jsxs)(c,{onClick:()=>{if(!j)return void h({title:"No File Selected",description:"Please select a CSV file to import.",variant:"destructive"});let e=new FileReader;e.onload=e=>{var a,s,n,i;let l=null==(a=e.target)?void 0:a.result;if(!l)return void h({title:"Import Error",description:"Could not read file content.",variant:"destructive"});let o=l.split(/\r\n|\n/).filter(e=>""!==e.trim());if(o.length<2)return void h({title:"Import Error",description:"CSV file must have a header and at least one data row.",variant:"destructive"});let c=o[0].split(",").map(e=>e.trim().toLowerCase().replace(/"/g,"")),d=[],u=[],m={name:c.indexOf("name"),spacecraft:c.indexOf("spacecraft"),startTime:c.indexOf("starttime"),type:c.indexOf("type"),preActionDuration:c.indexOf("preactionduration"),postActionDuration:c.indexOf("postactionduration"),isCompleted:c.indexOf("iscompleted")};(-1===m.spacecraft||-1===m.startTime||-1===m.type)&&u.push("CSV header is missing one or more required columns: spacecraft, startTime, type. Optional: name, preActionDuration, postActionDuration, isCompleted.");for(let e=1;e<o.length;e++){let t=o[e].split(",").map(e=>e.trim().replace(/^"|"$/g,"").replace(/""/g,'"'));if(t.length<c.length&&0===u.length){u.push("Row ".concat(e+1,": Incorrect number of columns. Expected ").concat(c.length,", got ").concat(t.length,"."));continue}if(u.length>0&&-1===m.spacecraft)break;try{let a=t[m.spacecraft],r=t[m.startTime],l=t[m.type];if(!K.includes(a)){u.push("Row ".concat(e+1,': Invalid spacecraft "').concat(a,'".'));continue}if(isNaN(Date.parse(r))){u.push("Row ".concat(e+1,': Invalid startTime format "').concat(r,'". Must be ISO 8601 format.'));continue}if(!v.some(e=>e.value===l)){let t=v.map(e=>e.value).join(", ");u.push("Row ".concat(e+1,': Invalid task type "').concat(l,'". Valid types are: ').concat(t,"."));continue}let o=ea(l,v),c=-1!==m.name?t[m.name]:void 0;c&&""!==c.trim()||(c=o?"".concat(o.label," - ").concat(a):"".concat(l," - ").concat(a));let p=-1!==m.preActionDuration?t[m.preActionDuration]:void 0,f=void 0===p||isNaN(parseInt(p))?null!=(n=null==o?void 0:o.preActionDuration)?n:0:parseInt(p),h=-1!==m.postActionDuration?t[m.postActionDuration]:void 0,x=void 0===h||isNaN(parseInt(h))?null!=(i=null==o?void 0:o.postActionDuration)?i:0:parseInt(h),g=-1!==m.isCompleted?null==(s=t[m.isCompleted])?void 0:s.toLowerCase():"false",j="true"===g;d.push({id:crypto.randomUUID(),name:c,spacecraft:a,startTime:new Date(r).toISOString(),type:l,preActionDuration:Math.max(0,f),postActionDuration:Math.max(0,x),isCompleted:j})}catch(t){u.push("Row ".concat(e+1,": Error processing row - ").concat(t.message))}}if(u.length>0)h({title:"Import Partially Failed",description:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[d.length," task(s) imported. ",u.length," row(s) had errors."]}),(0,r.jsxs)("ul",{className:"list-disc list-inside max-h-20 overflow-y-auto text-xs",children:[u.slice(0,5).map((e,t)=>(0,r.jsx)("li",{children:e},t)),u.length>5&&(0,r.jsxs)("li",{children:["...and ",u.length-5," more errors."]})]})]}),variant:"destructive",duration:1e4});else if(0===d.length&&o.length>1)return void h({title:"Import Failed",description:"No valid tasks found in the CSV file.",variant:"destructive"});d.length>0&&("replace"===y?t(d):t(e=>[...e,...d]),h({title:"Import Successful",description:"".concat(d.length," task(s) imported."),className:"bg-accent text-accent-foreground border-accent"})),b(null);let p=document.getElementById("csvImporter");p&&(p.value="")},e.onerror=()=>{h({title:"File Read Error",description:"Could not read the selected file.",variant:"destructive"}),b(null)},e.readAsText(j)},disabled:!j,children:[(0,r.jsx)(eP.A,{className:"mr-2 h-4 w-4"})," Process Import"]})]})]})]}),(0,r.jsx)(eu,{isOpen:a,onOpenChange:n,onSubmit:o?e=>{t(t=>t.map(t=>t.id===e.id?e:t)),d(null),h({title:"Task Updated",description:'"'.concat(e.name,'" has been updated.'),variant:"default"})}:e=>{t(t=>[...t,e]),h({title:"Task Added",description:'"'.concat(e.name,'" has been added to your schedule.'),variant:"default",className:"bg-accent text-accent-foreground border-accent"})},initialTask:o}),(0,r.jsx)(tn,{isOpen:i,onOpenChange:l}),(0,r.jsx)("footer",{className:"mt-8 pt-4 text-center text-sm text-muted-foreground border-t border-border",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," TimeFlow. Stay organized, effortlessly."]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(eF.A,{className:"h-12 w-12 animate-spin text-primary"})})}tj.displayName=tx.q7.displayName},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(12115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,351,441,684,358],()=>t(5943)),_N_E=e.O()}]);