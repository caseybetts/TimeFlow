(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5943:(e,t,a)=>{Promise.resolve().then(a.bind(a,73037))},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},73037:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ty});var r=a(95155),s=a(12115),n=a(99708),l=a(74466),i=a(59434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...d})});c.displayName="Button";var d=a(90221),u=a(62177),m=a(55594),p=a(15452),f=a(25318);let h=p.bL;p.l9;let x=p.ZL,g=p.bm,v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});v.displayName=p.hJ.displayName;let b=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(x,{children:[(0,r.jsx)(v,{}),(0,r.jsxs)(p.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(p.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});b.displayName=p.UC.displayName;let j=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};j.displayName="DialogHeader";let y=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};y.displayName="DialogFooter";let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});N.displayName=p.hE.displayName;let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(p.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});w.displayName=p.VY.displayName;var k=a(40968);let T=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),C=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(k.b,{ref:t,className:(0,i.cn)(T(),a),...s})});C.displayName=k.b.displayName;let A=u.Op,S=s.createContext({}),D=e=>{let{...t}=e;return(0,r.jsx)(S.Provider,{value:{name:t.name},children:(0,r.jsx)(u.xI,{...t})})},I=()=>{let e=s.useContext(S),t=s.useContext(R),{getFieldState:a,formState:r}=(0,u.xW)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},R=s.createContext({}),U=s.forwardRef((e,t)=>{let{className:a,...n}=e,l=s.useId();return(0,r.jsx)(R.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...n})})});U.displayName="FormItem";let L=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:l}=I();return(0,r.jsx)(C,{ref:t,className:(0,i.cn)(n&&"text-destructive",a),htmlFor:l,...s})});L.displayName="FormLabel";let E=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=I();return(0,r.jsx)(n.DX,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...a})});E.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=I();return(0,r.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let O=s.forwardRef((e,t)=>{var a;let{className:s,children:n,...l}=e,{error:o,formMessageId:c}=I(),d=o?String(null!=(a=null==o?void 0:o.message)?a:""):n;return d?(0,r.jsx)("p",{ref:t,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",s),...l,children:d}):null});O.displayName="FormMessage";let F=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});F.displayName="Input";var M=a(31992),z=a(79556),_=a(77381),V=a(10518);let P=M.bL;M.YJ;let W=M.WT,J=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(M.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(M.In,{asChild:!0,children:(0,r.jsx)(z.A,{className:"h-4 w-4 opacity-50"})})]})});J.displayName=M.l9.displayName;let G=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})});G.displayName=M.PP.displayName;let Y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(z.A,{className:"h-4 w-4"})})});Y.displayName=M.wn.displayName;let K=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...l}=e;return(0,r.jsx)(M.ZL,{children:(0,r.jsxs)(M.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.jsx)(G,{}),(0,r.jsx)(M.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(Y,{})]})})});K.displayName=M.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=M.JU.displayName;let Z=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(M.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(M.VF,{children:(0,r.jsx)(V.A,{className:"h-4 w-4"})})}),(0,r.jsx)(M.p4,{children:s})]})});Z.displayName=M.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=M.wv.displayName;let B=["fsv","rtp","tl","appointment"],q=["GE01","WV01","WV02","WV03","LG01","LG02","LG03","LG04","LG05","LG06"];var H=a(57082),X=a(91721),Q=a(94815),$=a(98328);let ee=[{value:"fsv",label:"FSV",icon:H.A,color:"bg-sky-500",preActionDuration:10,preActionLabel:"Prep",postActionDuration:5,postActionLabel:"Wrap-up"},{value:"rtp",label:"RTP",icon:X.A,color:"bg-purple-500",preActionDuration:0,preActionLabel:"",postActionDuration:0,postActionLabel:""},{value:"tl",label:"TL",icon:Q.A,color:"bg-orange-500",preActionDuration:5,preActionLabel:"Travel to",postActionDuration:5,postActionLabel:"Travel from"},{value:"appointment",label:"Appointment",icon:$.A,color:"bg-teal-500",preActionDuration:15,preActionLabel:"Travel & Check-in",postActionDuration:0,postActionLabel:""}];function et(e){return ee.map(t=>{let a=e[t.value];return a?{...t,...a}:t})}function ea(e,t){return t.find(t=>t.value===e)}function er(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"})+" UTC"}function es(e,t){let a=new Date(e);return new Date(new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())).getTime()+6e4*t).toISOString()}let en="timeflow-task-type-config";function el(){let[e,t]=(0,s.useState)(()=>{try{let e=window.localStorage.getItem(en);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading task type config from localStorage:",e),{}}}),[a,r]=(0,s.useState)(()=>et(e));return(0,s.useEffect)(()=>{try{window.localStorage.setItem(en,JSON.stringify(e)),r(et(e))}catch(e){console.error("Error setting task type config in localStorage:",e)}},[e]),(0,s.useEffect)(()=>{try{let e=window.localStorage.getItem(en),a=e?JSON.parse(e):{};t(a)}catch(e){console.error("Error synchronizing task type config from localStorage:",e)}},[]),{effectiveTaskTypeOptions:a,userConfig:e,updateUserConfig:(0,s.useCallback)(e=>{t(e)},[]),resetTaskTypeConfig:(0,s.useCallback)(e=>{t(t=>{if(e){let{[e]:a,...r}=t;return r}return{}})},[])}}var ei=a(15222),eo=a(34301);let ec=m.z.object({name:m.z.string().optional(),spacecraft:m.z.enum(q,{required_error:"Spacecraft selection is required."}),startTime:m.z.string().refine(e=>!isNaN(Date.parse(e+"Z"))||!isNaN(Date.parse(e)),{message:"Invalid start time format. Please ensure it's a complete date and time."}),type:m.z.enum(B)}),ed=e=>{let t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(n)};function eu(e){let{isOpen:t,onOpenChange:a,onSubmit:n,initialTask:l}=e,{effectiveTaskTypeOptions:i}=el(),o=ed(new Date),m=i.length>0?i[0].value:B[0],p=q[0],f=(0,u.mN)({resolver:(0,d.u)(ec),defaultValues:l?{name:l.name||"",spacecraft:l.spacecraft,startTime:ed(new Date(l.startTime)),type:l.type}:{name:"",spacecraft:p,startTime:o,type:m}});return(0,s.useEffect)(()=>{if(t){let e=i.length>0?i[0].value:B[0];l?f.reset({name:l.name||"",spacecraft:l.spacecraft,startTime:ed(new Date(l.startTime)),type:l.type}):f.reset({name:"",spacecraft:p,startTime:ed(new Date),type:e})}},[l,f,t,i,p]),(0,r.jsx)(h,{open:t,onOpenChange:a,children:(0,r.jsxs)(b,{className:"sm:max-w-[425px] bg-card",children:[(0,r.jsx)(j,{children:(0,r.jsx)(N,{className:"font-headline text-2xl",children:l?"Edit Task":"Add New Task"})}),(0,r.jsx)(A,{...f,children:(0,r.jsxs)("form",{onSubmit:f.handleSubmit(e=>{let t=ea(e.type,i),r=e.name;r&&""!==r.trim()||(r="".concat((null==t?void 0:t.label)||e.type," - ").concat(e.spacecraft)),n({id:(null==l?void 0:l.id)||crypto.randomUUID(),name:r,spacecraft:e.spacecraft,startTime:new Date(e.startTime+"Z").toISOString(),duration:1,type:e.type,preActionDuration:(null==t?void 0:t.preActionDuration)||0,postActionDuration:(null==t?void 0:t.postActionDuration)||0,isCompleted:(null==l?void 0:l.isCompleted)||!1}),a(!1)}),className:"space-y-6 py-4",children:[(0,r.jsx)(D,{control:f.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(U,{children:[(0,r.jsx)(L,{children:"Task Name (Optional)"}),(0,r.jsx)(E,{children:(0,r.jsx)(F,{placeholder:"E.g., Morning Standup",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(D,{control:f.control,name:"spacecraft",render:e=>{let{field:t}=e;return(0,r.jsxs)(U,{children:[(0,r.jsx)(L,{children:"Spacecraft"}),(0,r.jsxs)(P,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(E,{children:(0,r.jsx)(J,{children:(0,r.jsx)(W,{placeholder:"Select a spacecraft"})})}),(0,r.jsx)(K,{children:q.map(e=>(0,r.jsx)(Z,{value:e,children:e},e))})]}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(D,{control:f.control,name:"startTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(U,{children:[(0,r.jsx)(L,{children:"Start Time (UTC)"}),(0,r.jsx)(E,{children:(0,r.jsx)(F,{type:"datetime-local",...t})}),(0,r.jsx)(O,{})]})}}),(0,r.jsx)(D,{control:f.control,name:"type",render:e=>{let{field:t}=e;return(0,r.jsxs)(U,{children:[(0,r.jsx)(L,{children:"Task Type"}),(0,r.jsxs)(P,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(E,{children:(0,r.jsx)(J,{children:(0,r.jsx)(W,{placeholder:"Select a task type"})})}),(0,r.jsx)(K,{children:i.map(e=>(0,r.jsx)(Z,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]})},e.value))})]}),(0,r.jsx)(O,{})]})}}),(0,r.jsxs)(y,{className:"pt-4",children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(c,{type:"button",variant:"outline",children:"Cancel"})}),(0,r.jsxs)(c,{type:"submit",children:[l?(0,r.jsx)(ei.A,{className:"mr-2 h-4 w-4"}):(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"}),l?"Save Changes":"Add Task"]})]})]})})]})})}let em=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});em.displayName="Card";let ep=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});ep.displayName="CardHeader";let ef=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});ef.displayName="CardTitle";let eh=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});eh.displayName="CardDescription";let ex=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});ex.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var eg=a(76981);let ev=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eg.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(eg.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(V.A,{className:"h-4 w-4"})})})});ev.displayName=eg.bL.displayName;var eb=a(87489);let ej=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...l}=e;return(0,r.jsx)(eb.b,{ref:t,decorative:n,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...l})});ej.displayName=eb.b.displayName;var ey=a(89613);let eN=ey.Kq,ew=ey.bL,ek=ey.l9,eT=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(ey.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});eT.displayName=ey.UC.displayName;var eC=a(78843),eA=a(31949),eS=a(37648),eD=a(77223);function eI(e){let{task:t,onEdit:a,onDelete:s,onToggleComplete:n}=e,{effectiveTaskTypeOptions:l}=el(),o=function(e){let t=ee.find(t=>t.value===e);return t?t.icon:H.A}(t.type),d=function(e){let t=ee.find(t=>t.value===e);return t?t.color:"bg-gray-500"}(t.type),u=ea(t.type,l),m=t.startTime,p=es(m,t.duration),f=t.preActionDuration>0?es(m,-t.preActionDuration):"",h=t.postActionDuration>0?es(p,t.postActionDuration):"",x=new Date(t.startTime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}),g=new Date(t.preActionDuration>0?f:m)<new Date&&!t.isCompleted,v=(null==u?void 0:u.label)||t.type,b=t.name||"".concat(v," - ").concat(t.spacecraft);return(0,r.jsxs)(em,{className:(0,i.cn)("mb-4 shadow-lg transition-all hover:shadow-xl",t.isCompleted?"opacity-60":"",g?"border-destructive":""),children:[(0,r.jsx)(ep,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:(0,i.cn)("p-2 rounded-full",d,t.isCompleted?"":"text-primary-foreground"),children:(0,r.jsx)(o,{className:(0,i.cn)("h-5 w-5",t.isCompleted?"text-muted-foreground":"text-primary-foreground")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(ef,{className:(0,i.cn)("text-lg font-headline",t.isCompleted?"line-through text-muted-foreground":""),children:b}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(eh,{className:"text-xs",children:[x," (UTC)"]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center",children:[(0,r.jsx)(eC.A,{className:"mr-1 h-3 w-3"})," ",t.spacecraft]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",v,")"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(eN,{children:(0,r.jsxs)(ew,{children:[(0,r.jsx)(ek,{asChild:!0,children:(0,r.jsx)(ev,{id:"complete-".concat(t.id),checked:t.isCompleted,onCheckedChange:()=>n(t.id),"aria-label":"Mark task as complete",className:(0,i.cn)(t.isCompleted?"border-accent data-[state=checked]:bg-accent":"")})}),(0,r.jsx)(eT,{children:(0,r.jsx)("p",{children:t.isCompleted?"Mark as Incomplete":"Mark as Complete"})})]})}),g&&(0,r.jsx)(eN,{children:(0,r.jsxs)(ew,{children:[(0,r.jsx)(ek,{children:(0,r.jsx)(eA.A,{className:"h-5 w-5 text-destructive"})}),(0,r.jsx)(eT,{children:(0,r.jsx)("p",{children:"This task is overdue!"})})]})})]})]})}),(0,r.jsxs)(ex,{className:"p-4 pt-0",children:[(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[t.preActionDuration>0&&(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(eS.A,{className:"mr-2 h-4 w-4 text-primary opacity-70"}),(0,r.jsxs)("span",{children:[(null==u?void 0:u.preActionLabel)||"Pre-Action",": ",t.preActionDuration," min (",er(f)," - ",er(m),")"]})]}),(0,r.jsxs)("div",{className:"flex items-center font-medium",children:[(0,r.jsx)(eS.A,{className:"mr-2 h-4 w-4 text-primary"}),(0,r.jsxs)("span",{children:["Core Task: ",t.duration," min (",er(m)," - ",er(p),")"]})]}),t.postActionDuration>0&&(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(eS.A,{className:"mr-2 h-4 w-4 text-primary opacity-70"}),(0,r.jsxs)("span",{children:[(null==u?void 0:u.postActionLabel)||"Post-Action",": ",t.postActionDuration," min (",er(p)," - ",er(h),")"]})]})]}),(0,r.jsx)(ej,{className:"my-3"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>a(t),"aria-label":"Edit task ".concat(b),children:[(0,r.jsx)(ei.A,{className:"mr-1 h-4 w-4"})," Edit"]}),(0,r.jsxs)(c,{variant:"destructive",size:"sm",onClick:()=>s(t.id),"aria-label":"Delete task ".concat(b),children:[(0,r.jsx)(eD.A,{className:"mr-1 h-4 w-4"})," Delete"]})]})]})]})}var eR=a(47655);let eU=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(eR.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...n,children:[(0,r.jsx)(eR.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(eL,{}),(0,r.jsx)(eR.OK,{})]})});eU.displayName=eR.bL.displayName;let eL=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,r.jsx)(eR.VM,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,r.jsx)(eR.lr,{className:"relative flex-1 rounded-full bg-border"})})});eL.displayName=eR.VM.displayName;var eE=a(66766);function eO(e){let{tasks:t,onEditTask:a,onDeleteTask:s,onToggleComplete:n}=e,l=[...t].sort((e,t)=>new Date(e.startTime).getTime()-6e4*e.preActionDuration-(new Date(t.startTime).getTime()-6e4*t.preActionDuration));return 0===l.length?(0,r.jsxs)("div",{className:"mt-8 flex flex-col items-center justify-center text-center p-8 border-2 border-dashed border-border rounded-lg bg-card min-h-[300px]",children:[(0,r.jsx)(eE.default,{src:"https://placehold.co/200x200.png",alt:"No tasks",width:150,height:150,"data-ai-hint":"empty calendar illustration",className:"mb-6 rounded-lg opacity-70"}),(0,r.jsx)("h3",{className:"text-xl font-headline text-foreground mb-2",children:"Your schedule is empty!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Add some tasks to get started with TimeFlow."})]}):(0,r.jsx)(eU,{className:"mt-6 h-[calc(100vh-250px)] rounded-md border p-1 sm:p-4 bg-background shadow-inner",children:(0,r.jsx)("div",{className:"space-y-1 sm:space-y-0",children:l.map(e=>(0,r.jsx)(eI,{task:e,onEdit:a,onDelete:s,onToggleComplete:n},e.id))})})}var eF=a(87481),eM=a(50172),ez=a(18271),e_=a(36936),eV=a(68027),eP=a(68718),eW=a(16923),eJ=a(83540),eG=a(39823),eY=a(94754),eK=a(96025),eZ=a(16238),eB=a(94517),eq=a(24026),eH=a(20594),eX=a(54811),eQ=a(70919);let e$={light:"",dark:".dark"},e0=s.createContext(null);function e1(){let e=s.useContext(e0);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let e2=s.forwardRef((e,t)=>{let{id:a,className:n,children:l,config:o,...c}=e,d=s.useId(),u="chart-".concat(a||d.replace(/:/g,""));return(0,r.jsx)(e0.Provider,{value:{config:o},children:(0,r.jsxs)("div",{"data-chart":u,ref:t,className:(0,i.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...c,children:[(0,r.jsx)(e4,{id:u,config:o}),(0,r.jsx)(eJ.u,{children:l})]})})});e2.displayName="Chart";let e4=e=>{let{id:t,config:a}=e,s=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(e$).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[r,s]=e,n=(null==(t=s.theme)?void 0:t[a])||s.color;return n?"  --color-".concat(r,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};eB.m,s.forwardRef((e,t)=>{let{active:a,payload:n,className:l,indicator:o="dot",hideLabel:c=!1,hideIndicator:d=!1,label:u,labelFormatter:m,labelClassName:p,formatter:f,color:h,nameKey:x,labelKey:g,content:v,...b}=e,{config:j}=e1(),y=s.useMemo(()=>{if(c||!(null==n?void 0:n.length))return null;if("string"==typeof u){var e;let t=(null==(e=j[u])?void 0:e.label)||u;return(0,r.jsx)("div",{className:(0,i.cn)("font-medium",p),children:t})}if(s.isValidElement(u))return(0,r.jsx)("div",{className:(0,i.cn)("font-medium",p),children:u});let[t]=n,a="".concat(g||t.dataKey||t.name||"value"),l=e3(j,t,a),o=null==l?void 0:l.label;return m&&o?(0,r.jsx)("div",{className:(0,i.cn)("font-medium",p),children:m(o,n)}):o?(0,r.jsx)("div",{className:(0,i.cn)("font-medium",p),children:o}):null},[u,m,n,c,p,j,g]);if(!a||!(null==n?void 0:n.length))return null;if(v)return(0,r.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),...b,children:[y,"function"==typeof v?v({payload:n,config:j}):v]});let N=1===n.length&&"dot"!==o;return(0,r.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),...b,children:[N?null:y,(0,r.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let a="".concat(x||e.name||e.dataKey||"value"),s=e3(j,e,a),n=h||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,i.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.icon)?(0,r.jsx)(s.icon,{}):!d&&(0,r.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":N&&"dashed"===o}),style:{"--color-bg":n,"--color-border":n}}),(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[N?y:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),void 0!==e.value&&null!==e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:Array.isArray(e.value)?"".concat(e.value[0].toLocaleString()," - ").concat(e.value[1].toLocaleString()):e.value.toLocaleString()})]})]})},e.dataKey||t)})})]})}).displayName="ChartTooltipContent",eq.s;let e5=s.forwardRef((e,t)=>{let{className:a,hideIcon:s=!1,payload:n,verticalAlign:l="bottom",nameKey:o}=e,{config:c}=e1();if(!(null==n?void 0:n.length)){let e=Object.entries(c);return e.length?(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===l?"pb-3":"pt-3",a),children:e.map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[!s&&(a.icon?(0,r.jsx)(a.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:"var(--color-".concat(t,")")}})),a.label]},t)})}):null}return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===l?"pb-3":"pt-3",a),children:n.map(e=>{var t;let a="".concat(o||e.dataKey||"value"),n=e3(c,e,a);return(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==n?void 0:n.icon)&&!s?(0,r.jsx)(n.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),(null==n?void 0:n.label)||e.value]},null==(t=e.value)?void 0:t.toString())})})});function e3(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return(a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e)?e[s]:t&&"name"in t&&"string"==typeof t.name&&t.name in e?e[t.name]:a in e?e[a]:void 0}e5.displayName="ChartLegend";var e8=a(54073);let e6=s.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,r.jsxs)(e8.bL,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",a),value:s,...n,children:[(0,r.jsx)(e8.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(e8.Q6,{className:"absolute h-full bg-primary"})}),Array.isArray(s)&&2===s.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e8.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),(0,r.jsx)(e8.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}):(0,r.jsx)(e8.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});e6.displayName=e8.bL.displayName;var e9=a(67554);let e7=e=>e.toLowerCase().replace(/\s+/g,""),te=e=>{let t=Math.floor(e/60)%24;return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},tt=e=>{let{active:t,payload:a,label:s,effectiveTaskTypeOptions:n}=e;if(t&&a&&a.length){let e=a[0].payload;if(!e)return(0,r.jsx)("div",{style:{backgroundColor:"hsl(var(--destructive))",color:"hsl(var(--destructive-foreground))",padding:"5px",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",zIndex:1e3},children:"Error: Tooltip payload data missing."});if(!e.originalTask)return(0,r.jsxs)("div",{style:{backgroundColor:"hsl(var(--destructive))",color:"hsl(var(--destructive-foreground))",padding:"5px",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",zIndex:1e3},children:["Error: Original task data missing in tooltip. (Task name: ",e.taskNameForAxis||"Unknown",")"]});let t=e.originalTask,s=ea(t.type,n),l=t.name||"".concat((null==s?void 0:s.label)||t.type," - ").concat(t.spacecraft),i=er(new Date(t.startTime).toISOString());return(0,r.jsxs)("div",{style:{backgroundColor:"hsla(var(--background) / 0.9)",border:"1px solid hsl(var(--border))",padding:"10px",borderRadius:"var(--radius)",boxShadow:"0 4px 6px hsla(var(--foreground) / 0.1)",color:"hsl(var(--foreground))",fontSize:"0.875rem",zIndex:1e3},children:[(0,r.jsxs)("p",{style:{fontWeight:"600",margin:"0 0 8px 0",borderBottom:"1px solid hsl(var(--border))",paddingBottom:"8px"},children:[l," ",(0,r.jsxs)("span",{style:{opacity:.7},children:["(",t.isCompleted?"Completed":"Pending",")"]})]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Core Starts:"})," ",i]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Spacecraft:"})," ",t.spacecraft]}),(0,r.jsxs)("p",{style:{margin:"0 0 5px 0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Pre-Action:"})," ",t.preActionDuration," min"]}),(0,r.jsxs)("p",{style:{margin:"0"},children:[(0,r.jsx)("span",{style:{fontWeight:"500"},children:"Post-Action:"})," ",t.postActionDuration," min"]})]})}return null},ta=[0,1440];function tr(e){let{tasks:t,selectedDate:a}=e,[n,l]=(0,s.useState)(!1),{effectiveTaskTypeOptions:i}=el(),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(ta),[p,f]=(0,s.useState)(0);(0,s.useEffect)(()=>{l(!0)},[]);let h=(0,s.useMemo)(()=>i.reduce((e,t)=>{let a=e7(t.value),r="hsl(var(--muted))",s=ee.find(e=>e.value===t.value);if(s)switch(s.value){case"fsv":r="hsl(var(--chart-1))";break;case"rtp":r="hsl(var(--chart-2))";break;case"tl":r="hsl(var(--chart-3))";break;case"appointment":r="hsl(var(--chart-4))"}return e[a]={label:t.label,color:r,icon:t.icon||(null==s?void 0:s.icon)},e},{}),[i]),x=(0,s.useMemo)(()=>{let e=u[0],r=u[1],s=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),n=s+6e4*e,l=s+6e4*r,o=t.filter(e=>{let t=new Date(e.startTime).getTime(),a=t-6e4*e.preActionDuration,r=t+(e.duration+e.postActionDuration)*6e4;return a<l&&r>n});return o.sort((e,t)=>new Date(e.startTime).getTime()-6e4*e.preActionDuration-(new Date(t.startTime).getTime()-6e4*t.preActionDuration)),o.map(e=>{let t=(new Date(e.startTime).getTime()-6e4*e.preActionDuration-s)/6e4,a=e.preActionDuration+e.duration+e.postActionDuration,r=ea(e.type,i),n=e.name||"".concat((null==r?void 0:r.label)||e.type," - "),l="".concat(n.substring(0,25)).concat(n.length>25?"...":""," (").concat(e.spacecraft,")");return{id:e.id,taskNameForAxis:l,timeRange:[t,t+a],fillColorKey:e.type,originalTask:e,tooltipLabel:n,isCompleted:e.isCompleted||!1}}).filter(Boolean)},[t,a,u,i]);(0,s.useEffect)(()=>{let e=new Date,t=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),r=(e.getTime()-t)/6e4;r>=u[0]&&r<=u[1]?d(r):d(null)},[a,u,t,p]);let g=x.length>0?6*Math.max(...x.map(e=>e.taskNameForAxis.length))+40:80;return n?(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(ef,{children:"Daily Schedule Graph"}),(0,r.jsxs)(eh,{children:["Schedule for: ",a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}),". Times are displayed in UTC. Use slider to adjust view."]})]}),(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>{f(e=>e+1)},"aria-label":"Refresh 'Now' line",children:[(0,r.jsx)(e9.A,{className:"h-4 w-4 mr-2"}),"Refresh 'Now'"]})]}),(0,r.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,r.jsxs)(C,{htmlFor:"time-range-slider",className:"text-sm font-medium",children:["Visible Time Range (UTC): ",te(u[0])," - ",te(u[1])]}),(0,r.jsx)(e6,{id:"time-range-slider",min:0,max:2880,step:15,value:u,onValueChange:e=>{let[t,a]=e;a-t<30&&(a!==u[1]?t=Math.max(0,a-30):a=Math.min(2880,t+30)),m([Math.round(t),Math.round(a)])},className:"w-full","aria-label":"Time range slider"})]})]}),(0,r.jsx)(ex,{className:"min-h-[250px] flex flex-col justify-center",children:0===x.length&&null===o&&n?(0,r.jsxs)("p",{className:"text-muted-foreground text-center py-8",children:["No tasks scheduled for this period on ",a.toLocaleDateString("en-CA",{timeZone:"UTC"}),"."]}):(0,r.jsx)(e2,{config:h,className:"min-h-[200px] h-[calc(40px*var(--visible-tasks,10)+100px)] max-h-[800px] w-full",style:{"--visible-tasks":Math.max(1,x.length)},children:(0,r.jsx)(eJ.u,{width:"100%",height:"100%",children:(0,r.jsxs)(eG.E,{layout:"vertical",data:x,margin:{top:5,right:30,left:Math.min(250,g),bottom:20},barCategoryGap:"20%",children:[(0,r.jsx)(eY.d,{strokeDasharray:"3 3",horizontal:!0,vertical:!0}),(0,r.jsx)(eK.W,{type:"number",dataKey:"timeRange[0]",domain:u,tickFormatter:e=>{let t=Math.floor(e/60)%24;return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},label:{value:"Time (UTC)",position:"insideBottom",offset:-10,dy:10},allowDecimals:!1,scale:"time",interval:"preserveStartEnd",minTickGap:30}),(0,r.jsx)(eZ.h,{type:"category",dataKey:"id",tickFormatter:e=>{var t;return(null==(t=x.find(t=>t.id===e))?void 0:t.taskNameForAxis)||""},width:g,interval:0,domain:x.length>0?void 0:["No Tasks"],ticks:x.length>0?x.map(e=>e.id):[]}),(0,r.jsx)(eB.m,{cursor:{fill:"hsla(var(--muted), 0.5)"},content:e=>(0,r.jsx)(tt,{...e,effectiveTaskTypeOptions:i}),wrapperStyle:{zIndex:1100}}),(0,r.jsx)(eq.s,{content:(0,r.jsx)(e5,{})}),x.length>0&&(0,r.jsx)(eH.y,{dataKey:"timeRange",barSize:20,radius:[4,4,4,4],children:x.map(e=>{var t;let a=(null==(t=h[e7(e.fillColorKey)])?void 0:t.color)||"hsl(var(--muted))";if(e.isCompleted){if(a.startsWith("hsl(var(--")){let e=a.substring(4,a.length-1);a="hsla(".concat(e,", 0.5)")}else if(a.startsWith("hsl(")){let e=a.substring(4,a.length-1);a="hsla(".concat(e,", 0.5)")}}return(0,r.jsx)(eX.f,{fill:a},"cell-".concat(e.id))})}),null!==o&&(0,r.jsx)(eQ.e,{x:o,stroke:"hsl(var(--destructive))",strokeWidth:2,strokeDasharray:"8 4",ifOverflow:"hidden",label:{value:"Now",position:"insideTopRight",fill:"hsl(var(--destructive))",fontSize:12,fontWeight:"bold",dy:-10,dx:10}})]})})})})]}):(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsx)(ef,{children:"Daily Schedule Graph"}),(0,r.jsxs)(eh,{children:["Schedule for: ",a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}),". Times are displayed in UTC. Use slider to adjust view."]}),(0,r.jsx)("div",{className:"pt-4 space-y-2",children:(0,r.jsx)("div",{className:"h-6 w-full bg-muted rounded animate-pulse"})})]}),(0,r.jsx)(ex,{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Loading chart..."})]})}var ts=a(8531),tn=a(59119);function tl(e){let{isOpen:t,onOpenChange:a}=e,{userConfig:n,updateUserConfig:l,resetTaskTypeConfig:i}=el(),[o,d]=(0,s.useState)({}),{toast:u}=(0,eF.dj)();(0,s.useEffect)(()=>{t&&d(JSON.parse(JSON.stringify(n)))},[t,n]);let m=(e,t,a)=>{d(r=>{var s,n,l,i,o,c,d,u,m,p;let f=r[e]||{},h=ee.find(t=>t.value===e),x={label:null!=(n=null!=(s=f.label)?s:null==h?void 0:h.label)?n:"",preActionDuration:null!=(i=null!=(l=f.preActionDuration)?l:null==h?void 0:h.preActionDuration)?i:0,preActionLabel:null!=(c=null!=(o=f.preActionLabel)?o:null==h?void 0:h.preActionLabel)?c:"",postActionDuration:null!=(u=null!=(d=f.postActionDuration)?d:null==h?void 0:h.postActionDuration)?u:0,postActionLabel:null!=(p=null!=(m=f.postActionLabel)?m:null==h?void 0:h.postActionLabel)?p:""};return"preActionDuration"===t||"postActionDuration"===t?x[t]=Math.max(0,Number(a)):x[t]=String(a),{...r,[e]:x}})},p=e=>{var t;i(e),d(t=>{let{[e]:a,...r}=t;return r}),u({title:"Task Type Configuration Reset",description:'Settings for "'.concat(null==(t=ee.find(t=>t.value===e))?void 0:t.label,'" have been reset to default.')})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h,{open:t,onOpenChange:a,children:(0,r.jsxs)(b,{className:"sm:max-w-lg md:max-w-2xl bg-card",children:[(0,r.jsxs)(j,{children:[(0,r.jsx)(N,{className:"font-headline text-2xl",children:"Task Type Settings"}),(0,r.jsx)(w,{children:"Customize labels and pre/post action durations for task types."})]}),(0,r.jsx)(eU,{className:"max-h-[70vh] p-1 pr-4",children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Task Type Configuration"}),(0,r.jsx)("div",{className:"space-y-6",children:ee.map(e=>{var t,a,s,n,l;let i=o[e.value]||{},d=null!=(t=i.label)?t:e.label,u=null!=(a=i.preActionDuration)?a:e.preActionDuration,f=null!=(s=i.preActionLabel)?s:e.preActionLabel,h=null!=(n=i.postActionDuration)?n:e.postActionDuration,x=null!=(l=i.postActionLabel)?l:e.postActionLabel;return(0,r.jsxs)("div",{className:"p-4 border rounded-md shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-primary flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-5 w-5"}),"Default: ",e.label," (Type: ",e.value,")"]}),(0,r.jsxs)(c,{variant:"outline",size:"sm",onClick:()=>p(e.value),children:[(0,r.jsx)(ts.A,{className:"mr-2 h-4 w-4"})," Reset"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(C,{htmlFor:"label-".concat(e.value),children:"Display Name"}),(0,r.jsx)(F,{id:"label-".concat(e.value),value:d,onChange:t=>m(e.value,"label",t.target.value),placeholder:e.label})]}),(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(C,{htmlFor:"preActionDuration-".concat(e.value),children:"Pre-Action Duration (min)"}),(0,r.jsx)(F,{id:"preActionDuration-".concat(e.value),type:"number",value:u,min:"0",onChange:t=>m(e.value,"preActionDuration",parseInt(t.target.value,10)),placeholder:String(e.preActionDuration)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(C,{htmlFor:"preActionLabel-".concat(e.value),children:"Pre-Action Label"}),(0,r.jsx)(F,{id:"preActionLabel-".concat(e.value),value:f||"",onChange:t=>m(e.value,"preActionLabel",t.target.value),placeholder:e.preActionLabel||"E.g., Prep"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(C,{htmlFor:"postActionDuration-".concat(e.value),children:"Post-Action Duration (min)"}),(0,r.jsx)(F,{id:"postActionDuration-".concat(e.value),type:"number",value:h,min:"0",onChange:t=>m(e.value,"postActionDuration",parseInt(t.target.value,10)),placeholder:String(e.postActionDuration)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(C,{htmlFor:"postActionLabel-".concat(e.value),children:"Post-Action Label"}),(0,r.jsx)(F,{id:"postActionLabel-".concat(e.value),value:x||"",onChange:t=>m(e.value,"postActionLabel",t.target.value),placeholder:e.postActionLabel||"E.g., Wrap-up"})]})]})]},e.value)})}),(0,r.jsxs)(c,{onClick:()=>{l(o),u({title:"Task Type Settings Saved",description:"Task type configurations have been updated."})},className:"mt-4",children:[(0,r.jsx)(tn.A,{className:"mr-2 h-4 w-4"})," Save Task Type Changes"]})]})}),(0,r.jsx)(y,{className:"pt-4 mt-4",children:(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(c,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Close"})})})]})})})}let ti=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",a),...s})})});ti.displayName="Table";let to=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",a),...s})});to.displayName="TableHeader";let tc=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...s})});tc.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let td=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});td.displayName="TableRow";let tu=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});tu.displayName="TableHead";let tm=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});tm.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var tp=a(15599),tf=a(80393);let th=e=>{let t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(n)};function tx(e){let{onBatchAddTasks:t}=e,[a,n]=(0,s.useState)([]),{effectiveTaskTypeOptions:l}=el(),{toast:i}=(0,eF.dj)(),o=l.length>0?l[0].value:ee[0].value,d=q[0],u=e=>{n(a.filter(t=>t.tempId!==e))},m=e=>{let t=a.findIndex(t=>t.tempId===e);if(-1===t)return;let r=a[t],s={...r,tempId:crypto.randomUUID()};n([...a.slice(0,t+1),s,...a.slice(t+1)]),i({title:"Row Duplicated",description:'A copy of the task "'.concat(r.name||"Untitled Task",'" has been added below.')})},p=(e,t,r)=>{n(a.map(a=>a.tempId===e?{...a,[t]:r}:a))};return(0,r.jsxs)("div",{className:"my-8 p-4 border rounded-lg shadow-sm bg-card",children:[(0,r.jsx)("h3",{className:"text-xl font-headline font-semibold text-foreground mb-4",children:"Batch Add Tasks"}),0===a.length&&(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:'Click "Add Row" to start entering tasks in the table below.'}),a.length>0&&(0,r.jsxs)(ti,{className:"mb-4",children:[(0,r.jsx)(to,{children:(0,r.jsxs)(td,{children:[(0,r.jsx)(tu,{className:"w-[25%]",children:"Task Name (Optional)"}),(0,r.jsx)(tu,{className:"w-[20%]",children:"Spacecraft"}),(0,r.jsx)(tu,{className:"w-[30%]",children:"Start Time (UTC)"}),(0,r.jsx)(tu,{className:"w-[20%]",children:"Type"}),(0,r.jsx)(tu,{className:"w-[5%] text-right",children:"Actions"})]})}),(0,r.jsx)(tc,{children:a.map(e=>(0,r.jsxs)(td,{children:[(0,r.jsx)(tm,{children:(0,r.jsx)(F,{value:e.name||"",onChange:t=>p(e.tempId,"name",t.target.value),placeholder:"E.g., Team Meeting",className:"h-9"})}),(0,r.jsx)(tm,{children:(0,r.jsxs)(P,{value:e.spacecraft,onValueChange:t=>p(e.tempId,"spacecraft",t),children:[(0,r.jsx)(J,{className:"h-9",children:(0,r.jsx)(W,{placeholder:"Select spacecraft"})}),(0,r.jsx)(K,{children:q.map(e=>(0,r.jsx)(Z,{value:e,children:e},e))})]})}),(0,r.jsx)(tm,{children:(0,r.jsx)(F,{type:"datetime-local",value:e.startTime,onChange:t=>p(e.tempId,"startTime",t.target.value),className:"h-9"})}),(0,r.jsx)(tm,{children:(0,r.jsxs)(P,{value:e.type,onValueChange:t=>p(e.tempId,"type",t),children:[(0,r.jsx)(J,{className:"h-9",children:(0,r.jsx)(W,{placeholder:"Select type"})}),(0,r.jsx)(K,{children:l.map(e=>(0,r.jsx)(Z,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]})},e.value))})]})}),(0,r.jsxs)(tm,{className:"text-right space-x-1",children:[(0,r.jsx)(c,{variant:"ghost",size:"icon",onClick:()=>m(e.tempId),"aria-label":"Duplicate row",title:"Duplicate row",children:(0,r.jsx)(tp.A,{className:"h-4 w-4 text-blue-500"})}),(0,r.jsx)(c,{variant:"ghost",size:"icon",onClick:()=>u(e.tempId),"aria-label":"Remove row",title:"Remove row",children:(0,r.jsx)(eD.A,{className:"h-4 w-4 text-destructive"})})]})]},e.tempId))})]}),(0,r.jsxs)("div",{className:"flex justify-start space-x-2",children:[(0,r.jsxs)(c,{onClick:()=>{n([...a,{tempId:crypto.randomUUID(),name:"",spacecraft:d,startTime:th(new Date),type:o}])},variant:"outline",children:[(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"})," Add Row"]}),a.length>0&&(0,r.jsxs)(c,{onClick:()=>{let e=[],r=!0;if(0===a.length)return void i({title:"No Tasks to Add",description:"Please add some rows to the table first.",variant:"destructive"});for(let t of a){let a=ea(t.type,l);if(!a){i({title:"Error",description:'Could not find details for task type "'.concat(t.type,'".'),variant:"destructive"}),r=!1;break}let s=t.name;if(s&&""!==s.trim()||(s="".concat(a.label," - ").concat(t.spacecraft)),isNaN(Date.parse(t.startTime+"Z"))){i({title:"Validation Error",description:'Invalid start time for task "'.concat(s,'".'),variant:"destructive"}),r=!1;break}e.push({name:s,spacecraft:t.spacecraft,startTime:new Date(t.startTime+"Z").toISOString(),duration:1,type:t.type,preActionDuration:a.preActionDuration,postActionDuration:a.postActionDuration})}r&&e.length>0?(t(e),n([])):r&&0===e.length&&a.length>0&&i({title:"No Valid Tasks",description:"No valid tasks were found to add. Please check your inputs.",variant:"destructive"})},children:[(0,r.jsx)(tf.A,{className:"mr-2 h-4 w-4"})," Add All Tasks to Schedule"]})]})]})}var tg=a(57701),tv=a(70154);let tb=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tg.bL,{className:(0,i.cn)("grid gap-2",a),...s,ref:t})});tb.displayName=tg.bL.displayName;let tj=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(tg.q7,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)(tg.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(tv.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});function ty(){let[e,t]=function(){var e="timeflow-tasks",t=[];let[a,r]=(0,s.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.error("Error reading localStorage key “"+e+"”:",a),t}});return(0,s.useEffect)(()=>{try{let t=a instanceof Function?a(a):a;window.localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error("Error setting localStorage key “"+e+"”:",t)}},[e,a]),(0,s.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&r(JSON.parse(t))}catch(t){console.error("Error synchronizing localStorage key “"+e+"”:",t)}},[e]),[a,r]}(),[a,n]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),{toast:h}=(0,eF.dj)(),[x,g]=(0,s.useState)(new Date),{effectiveTaskTypeOptions:v}=el(),[b,j]=(0,s.useState)(null),[y,N]=(0,s.useState)("replace");(0,s.useEffect)(()=>{m(!0);let e=new Date;g(new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())))},[]),(0,s.useEffect)(()=>{if(u){let e=localStorage.getItem("timeflow-theme"),t=!1;e?t="dark"===e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(t=!0),f(t),document.documentElement.classList.toggle("dark",t)}},[u]);let w=e=>{if(null==e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?'"'.concat(t.replace(/"/g,'""'),'"'):t};return u?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col p-4 md:p-8 bg-background transition-colors duration-300",children:[(0,r.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 pb-4 border-b-2 border-border",children:[(0,r.jsx)("h1",{className:"text-4xl font-headline font-bold text-primary mb-4 sm:mb-0",children:"TimeFlow"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)(c,{variant:"outline",size:"icon",onClick:()=>i(!0),"aria-label":"Configure Task Types",children:(0,r.jsx)(ez.A,{className:"h-[1.2rem] w-[1.2rem]"})}),(0,r.jsx)(c,{variant:"outline",size:"icon",onClick:()=>{let e=!p;f(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("timeflow-theme",e?"dark":"light"),h({title:"Switched to ".concat(e?"Dark":"Light"," Mode"),variant:"default"})},"aria-label":"Toggle dark mode",children:p?(0,r.jsx)(e_.A,{className:"h-[1.2rem] w-[1.2rem]"}):(0,r.jsx)(eV.A,{className:"h-[1.2rem] w-[1.2rem]"})}),(0,r.jsxs)(c,{onClick:()=>{if(0===e.length)return void h({title:"No Tasks",description:"There are no tasks to export.",variant:"default"});let t=["id,name,spacecraft,startTime,duration,type,preActionDuration,postActionDuration,isCompleted"];e.forEach(e=>{let a=[w(e.id),w(e.name),w(e.spacecraft),w(e.startTime),w(e.duration),w(e.type),w(e.preActionDuration),w(e.postActionDuration),w(e.isCompleted)];t.push(a.join(","))});let a=new Blob([t.join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(a),t=new Date().toISOString().slice(0,10);r.setAttribute("href",e),r.setAttribute("download","timeflow_tasks_".concat(t,".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),h({title:"Export Successful",description:"Tasks exported to CSV.",className:"bg-accent text-accent-foreground border-accent"})}else h({title:"Export Failed",description:"Your browser does not support this feature.",variant:"destructive"})},variant:"outline",children:[(0,r.jsx)(eP.A,{className:"mr-2 h-4 w-4"})," Export Tasks (CSV)"]}),(0,r.jsxs)(c,{onClick:()=>{d(null),n(!0)},className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,r.jsx)(eo.A,{className:"mr-2 h-4 w-4"})," Add Task (Modal)"]})]})]}),(0,r.jsxs)("main",{className:"flex-grow space-y-8",children:[(0,r.jsx)("section",{children:(0,r.jsx)(tr,{tasks:e,selectedDate:x})}),(0,r.jsx)(tx,{onBatchAddTasks:e=>{let a=e.map(e=>{var t,a;let r=ea(e.type,v);return{...e,id:crypto.randomUUID(),isCompleted:!1,preActionDuration:null!=(t=null==r?void 0:r.preActionDuration)?t:0,postActionDuration:null!=(a=null==r?void 0:r.postActionDuration)?a:0}});t(e=>[...e,...a]),h({title:"Tasks Added",description:"".concat(a.length," task(s) have been added to your schedule."),variant:"default",className:"bg-accent text-accent-foreground border-accent"})}}),(0,r.jsxs)(em,{children:[(0,r.jsxs)(ep,{children:[(0,r.jsx)(ef,{children:"Import Tasks from CSV"}),(0,r.jsxs)(eh,{children:["Upload a CSV file to import tasks. Ensure your CSV has a header row with columns like: name (optional), spacecraft, startTime (ISO format), type (e.g., fsv, rtp), preActionDuration (optional), postActionDuration (optional), isCompleted (optional, true/false). The 'id' and 'duration' columns from the CSV will be ignored; new IDs are generated and duration is fixed at 1 min. Valid task type values are: ",v.map(e=>e.value).join(", "),"."]})]}),(0,r.jsxs)(ex,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(C,{htmlFor:"csvImporter",children:"CSV File"}),(0,r.jsx)(F,{id:"csvImporter",type:"file",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]?j(e.target.files[0]):j(null)},className:"mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(C,{children:"Import Mode"}),(0,r.jsxs)(tb,{defaultValue:"replace",onValueChange:e=>N(e),className:"mt-1 flex space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(tj,{value:"replace",id:"replaceMode"}),(0,r.jsx)(C,{htmlFor:"replaceMode",children:"Replace existing tasks"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(tj,{value:"add",id:"addMode"}),(0,r.jsx)(C,{htmlFor:"addMode",children:"Add to existing tasks"})]})]})]}),(0,r.jsxs)(c,{onClick:()=>{if(!b)return void h({title:"No File Selected",description:"Please select a CSV file to import.",variant:"destructive"});let e=new FileReader;e.onload=e=>{var a,s,n,l;let i=null==(a=e.target)?void 0:a.result;if(!i)return void h({title:"Import Error",description:"Could not read file content.",variant:"destructive"});let o=i.split(/\r\n|\n/).filter(e=>""!==e.trim());if(o.length<2)return void h({title:"Import Error",description:"CSV file must have a header and at least one data row.",variant:"destructive"});let c=o[0].split(",").map(e=>e.trim().toLowerCase()),d=[],u=[],m={name:c.indexOf("name"),spacecraft:c.indexOf("spacecraft"),startTime:c.indexOf("starttime"),type:c.indexOf("type"),preActionDuration:c.indexOf("preactionduration"),postActionDuration:c.indexOf("postactionduration"),isCompleted:c.indexOf("iscompleted")};(-1===m.spacecraft||-1===m.startTime||-1===m.type)&&u.push("CSV header is missing one or more required columns: spacecraft, startTime, type.");for(let e=1;e<o.length;e++){let t=o[e].split(",").map(e=>e.trim());if(t.length<c.length&&0===u.length){u.push("Row ".concat(e+1,": Incorrect number of columns. Expected ").concat(c.length,", got ").concat(t.length,"."));continue}if(u.length>0&&-1===m.spacecraft)break;try{let a=t[m.spacecraft],r=t[m.startTime],i=t[m.type];if(!q.includes(a)){u.push("Row ".concat(e+1,': Invalid spacecraft "').concat(a,'".'));continue}if(isNaN(Date.parse(r))){u.push("Row ".concat(e+1,': Invalid startTime format "').concat(r,'".'));continue}if(!v.some(e=>e.value===i)){let t=v.map(e=>e.value).join(", ");u.push("Row ".concat(e+1,': Invalid task type "').concat(i,'". Valid types are: ').concat(t,"."));continue}let o=ea(i,v),c=-1!==m.name?t[m.name]:void 0;c&&""!==c.trim()||(c=o?"".concat(o.label," - ").concat(a):"".concat(i," - ").concat(a));let p=-1!==m.preActionDuration?t[m.preActionDuration]:void 0,f=void 0===p||isNaN(parseInt(p))?null!=(n=null==o?void 0:o.preActionDuration)?n:0:parseInt(p),h=-1!==m.postActionDuration?t[m.postActionDuration]:void 0,x=void 0===h||isNaN(parseInt(h))?null!=(l=null==o?void 0:o.postActionDuration)?l:0:parseInt(h),g=-1!==m.isCompleted?null==(s=t[m.isCompleted])?void 0:s.toLowerCase():"false",b="true"===g;d.push({id:crypto.randomUUID(),name:c,spacecraft:a,startTime:new Date(r).toISOString(),duration:1,type:i,preActionDuration:f,postActionDuration:x,isCompleted:b})}catch(t){u.push("Row ".concat(e+1,": Error processing row - ").concat(t.message))}}if(u.length>0)h({title:"Import Partially Failed",description:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[d.length," task(s) imported. ",u.length," row(s) had errors."]}),(0,r.jsxs)("ul",{className:"list-disc list-inside max-h-20 overflow-y-auto text-xs",children:[u.slice(0,5).map((e,t)=>(0,r.jsx)("li",{children:e},t)),u.length>5&&(0,r.jsxs)("li",{children:["...and ",u.length-5," more errors."]})]})]}),variant:"destructive",duration:1e4});else if(0===d.length&&o.length>1)return void h({title:"Import Failed",description:"No valid tasks found in the CSV file.",variant:"destructive"});d.length>0&&("replace"===y?t(d):t(e=>[...e,...d]),h({title:"Import Successful",description:"".concat(d.length," task(s) imported."),className:"bg-accent text-accent-foreground border-accent"})),j(null);let p=document.getElementById("csvImporter");p&&(p.value="")},e.onerror=()=>{h({title:"File Read Error",description:"Could not read the selected file.",variant:"destructive"}),j(null)},e.readAsText(b)},disabled:!b,children:[(0,r.jsx)(eW.A,{className:"mr-2 h-4 w-4"})," Process Import"]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-2xl font-headline font-semibold text-foreground mb-4",children:"Task List"}),(0,r.jsx)(eO,{tasks:e,onEditTask:e=>{d(e),n(!0)},onDeleteTask:a=>{let r=e.find(e=>e.id===a);t(e=>e.filter(e=>e.id!==a)),r&&h({title:"Task Deleted",description:'"'.concat(r.name,'" has been removed.'),variant:"destructive"})},onToggleComplete:e=>{let a="",r=!1;t(t=>t.map(t=>t.id===e?(a=t.name||"Task",r=!t.isCompleted,{...t,isCompleted:!t.isCompleted}):t)),a&&h({title:r?"Task Completed!":"Task Marked Incomplete",description:'"'.concat(a,'" status updated.'),variant:"default",className:r?"bg-accent text-accent-foreground border-accent":""})}})]})]}),(0,r.jsx)(eu,{isOpen:a,onOpenChange:n,onSubmit:o?e=>{t(t=>t.map(t=>t.id===e.id?e:t)),d(null),h({title:"Task Updated",description:'"'.concat(e.name,'" has been updated.'),variant:"default"})}:e=>{t(t=>[...t,e]),h({title:"Task Added",description:'"'.concat(e.name,'" has been added to your schedule.'),variant:"default",className:"bg-accent text-accent-foreground border-accent"})},initialTask:o}),(0,r.jsx)(tl,{isOpen:l,onOpenChange:i}),(0,r.jsx)("footer",{className:"mt-8 pt-4 text-center text-sm text-muted-foreground border-t border-border",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," TimeFlow. Stay organized, effortlessly."]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(eM.A,{className:"h-12 w-12 animate-spin text-primary"})})}tj.displayName=tg.q7.displayName},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(12115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,639,441,684,358],()=>t(5943)),_N_E=e.O()}]);